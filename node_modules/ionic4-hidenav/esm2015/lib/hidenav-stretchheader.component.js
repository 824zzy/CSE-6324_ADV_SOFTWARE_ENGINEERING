/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Component, ContentChild, ElementRef, Input, EventEmitter, Output, ContentChildren, HostBinding } from '@angular/core';
import { HidenavShService } from './hidenav-sh-service.service';
export class HidenavStretchheaderComponent {
    /**
     * @param {?} el
     * @param {?} globals
     */
    constructor(el, globals) {
        this.el = el;
        this.globals = globals;
        this.scroll = new EventEmitter();
    }
    /**
     * @return {?}
     */
    ngOnInit() {
    }
    /**
     * @return {?}
     */
    ngAfterViewInit() {
        /** @type {?} */
        const observer = new MutationObserver((/**
         * @param {?} mutations
         * @return {?}
         */
        (mutations) => {
            mutations.forEach((/**
             * @return {?}
             */
            () => {
                if (this.el.nativeElement.getAttribute('hidenav-sh-header').length > 0) {
                    this.name = this.el.nativeElement.getAttribute('hidenav-sh-header');
                    this.start();
                    observer.disconnect();
                }
            }));
        }));
        observer.observe(this.el.nativeElement, {
            attributes: true,
        });
    }
    /**
     * @return {?}
     */
    start() {
        if (this.name) {
            if (typeof this.globals.data[this.name] == 'undefined' || this.globals.data[this.name] == null)
                this.globals.data[this.name] = [];
            this.globals.data[this.name].header = this.header;
            this.globals.data[this.name].static = this.static;
            this.globals.initiate(this.name);
            this.globals.scroll.subscribe((/**
             * @param {?} res
             * @return {?}
             */
            res => {
                if (res.name == this.name) {
                    this.scroll.emit(res.height);
                }
            }));
            if (this.noBorder != 'true') {
                /** @type {?} */
                let mode = document.querySelector('html').getAttribute('mode');
                setTimeout((/**
                 * @return {?}
                 */
                () => {
                    if (typeof this.class == 'undefined') {
                        this.class = mode;
                    }
                    else {
                        this.class += ' ' + mode;
                    }
                }), 0);
            }
        }
    }
    /**
     * @param {?=} duration
     * @return {?}
     */
    expand(duration = 200) {
        this.globals.expand(this.name, duration);
    }
    /**
     * @param {?=} duration
     * @return {?}
     */
    shrink(duration = 200) {
        this.globals.shrink(this.name, duration);
    }
    /**
     * @param {?=} duration
     * @return {?}
     */
    toggle(duration = 200) {
        this.globals.toggle(this.name, duration);
    }
    /**
     * @return {?}
     */
    ngOnDestroy() {
        if (this.name) {
            delete this.globals.data[this.name].header;
        }
    }
}
HidenavStretchheaderComponent.decorators = [
    { type: Component, args: [{
                selector: 'hidenav-stretchheader',
                template: `
        <style>
            .overlay {
                position: absolute;
                height: inherit;
                width: inherit;
                z-index: 101;
                pointer-events: none;
                /*opacity: var(--opacity);*/
                background: var(--color);
                filter: opacity(0);
                --opacity: 0;
                --color: black;
            }

            :host {
                --blur: 0;
                z-index: 1;
            }

            :host.md {
                -webkit-box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.53);
                -moz-box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.53);
                box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, 0.53);
            }

            :host.ios {
                border-bottom: 1px solid #5a5e63;
            }
        </style>
        <div class="overlay"></div>
        <ng-content></ng-content>
    `
            }] }
];
HidenavStretchheaderComponent.ctorParameters = () => [
    { type: ElementRef },
    { type: HidenavShService }
];
HidenavStretchheaderComponent.propDecorators = {
    header: [{ type: ContentChild, args: ['shrinkexpand', { read: ElementRef },] }],
    static: [{ type: ContentChildren, args: ['static', { read: ElementRef },] }],
    class: [{ type: HostBinding, args: ['class',] }],
    noBorder: [{ type: Input, args: ['no-border',] }],
    headerHeight: [{ type: Input, args: ['header-height',] }],
    initExpanded: [{ type: Input, args: ['init-expanded',] }],
    opacityColor: [{ type: Input, args: ['opacity-color',] }],
    opacityFactor: [{ type: Input, args: ['opacity-factor',] }],
    blurFactor: [{ type: Input, args: ['blur-factor',] }],
    preserveHeader: [{ type: Input, args: ['preserve-header',] }],
    scroll: [{ type: Output }]
};
if (false) {
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.header;
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.static;
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.class;
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.name;
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.noBorder;
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.headerHeight;
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.initExpanded;
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.opacityColor;
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.opacityFactor;
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.blurFactor;
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.preserveHeader;
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.scroll;
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.el;
    /** @type {?} */
    HidenavStretchheaderComponent.prototype.globals;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlkZW5hdi1zdHJldGNoaGVhZGVyLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiJuZzovL2lvbmljNC1oaWRlbmF2LyIsInNvdXJjZXMiOlsibGliL2hpZGVuYXYtc3RyZXRjaGhlYWRlci5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE9BQU8sRUFFSCxTQUFTLEVBQ1QsWUFBWSxFQUNaLFVBQVUsRUFFVixLQUFLLEVBQ0wsWUFBWSxFQUNaLE1BQU0sRUFDTixlQUFlLEVBQ2YsV0FBVyxFQUNkLE1BQU0sZUFBZSxDQUFDO0FBQ3ZCLE9BQU8sRUFBQyxnQkFBZ0IsRUFBQyxNQUFNLDhCQUE4QixDQUFDO0FBc0M5RCxNQUFNOzs7OztJQWVGLFlBQW1CLEVBQWMsRUFBUyxPQUF5QjtRQUFoRCxPQUFFLEdBQUYsRUFBRSxDQUFZO1FBQVMsWUFBTyxHQUFQLE9BQU8sQ0FBa0I7UUFGekQsV0FBTSxHQUF5QixJQUFJLFlBQVksRUFBVSxDQUFDO0lBR3BFLENBQUM7Ozs7SUFFRCxRQUFRO0lBQ1IsQ0FBQzs7OztJQUVELGVBQWU7O2NBQ0wsUUFBUSxHQUFHLElBQUksZ0JBQWdCOzs7O1FBQUMsQ0FBQyxTQUFTLEVBQUUsRUFBRTtZQUNoRCxTQUFTLENBQUMsT0FBTzs7O1lBQUMsR0FBRyxFQUFFO2dCQUNuQixJQUFHLElBQUksQ0FBQyxFQUFFLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUU7b0JBQ25FLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDLEVBQUUsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLG1CQUFtQixDQUFDLENBQUM7b0JBQ3BFLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztvQkFDYixRQUFRLENBQUMsVUFBVSxFQUFFLENBQUM7aUJBQ3pCO1lBQ0wsQ0FBQyxFQUFDLENBQUM7UUFDUCxDQUFDLEVBQUM7UUFDRixRQUFRLENBQUMsT0FBTyxD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LFNBQUMsUUFBUSxFQUFFLEVBQUMsSUFBSSxFQUFFLFVBQVUsRUFBQztvQkFDNUMsV0FBVyxTQUFDLE9BQU87dUJBRW5CLEtBQUssU0FBQyxXQUFXOzJCQUNqQixLQUFLLFNBQUMsZUFBZTsyQkFDckIsS0FBSyxTQUFDLGVBQWU7MkJBQ3JCLEtBQUssU0FBQyxlQUFlOzRCQUNyQixLQUFLLFNBQUMsZ0JBQWdCO3lCQUN0QixLQUFLLFNBQUMsYUFBYTs2QkFDbkIsS0FBSyxTQUFDLGlCQUFpQjtxQkFFdkIsTUFBTTs7OztJQVpQLCtDQUFxRTs7SUFDckUsK0NBQTJEOztJQUMzRCw4Q0FBaUM7O0lBQ2pDLDZDQUFVOztJQUNWLGlEQUFxQzs7SUFDckMscURBQTBDOztJQUMxQyxxREFBMEM7O0lBQzFDLHFEQUEwQzs7SUFDMUMsc0RBQTRDOztJQUM1QyxtREFBc0M7O0lBQ3RDLHVEQUE4Qzs7SUFFOUMsK0NBQW9FOztJQUV4RCwyQ0FBcUI7O0lBQUUsZ0RBQWdDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICAgIEFmdGVyVmlld0luaXQsXHJcbiAgICBDb21wb25lbnQsXHJcbiAgICBDb250ZW50Q2hpbGQsXHJcbiAgICBFbGVtZW50UmVmLFxyXG4gICAgT25Jbml0LFxyXG4gICAgSW5wdXQsXHJcbiAgICBFdmVudEVtaXR0ZXIsXHJcbiAgICBPdXRwdXQsXHJcbiAgICBDb250ZW50Q2hpbGRyZW4sXHJcbiAgICBIb3N0QmluZGluZ1xyXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5pbXBvcnQge0hpZGVuYXZTaFNlcnZpY2V9IGZyb20gJy4vaGlkZW5hdi1zaC1zZXJ2aWNlLnNlcnZpY2UnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgICBzZWxlY3RvcjogJ2hpZGVuYXYtc3RyZXRjaGhlYWRlcicsXHJcbiAgICB0ZW1wbGF0ZTogYFxyXG4gICAgICAgIDxzdHlsZT5cclxuICAgICAgICAgICAgLm92ZXJsYXkge1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBpbmhlcml0O1xyXG4gICAgICAgICAgICAgICAgd2lkdGg6IGluaGVyaXQ7XHJcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAxMDE7XHJcbiAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcclxuICAgICAgICAgICAgICAgIC8qb3BhY2l0eTogdmFyKC0tb3BhY2l0eSk7Ki9cclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWNvbG9yKTtcclxuICAgICAgICAgICAgICAgIGZpbHRlcjogb3BhY2l0eSgwKTtcclxuICAgICAgICAgICAgICAgIC0tb3BhY2l0eTogMDtcclxuICAgICAgICAgICAgICAgIC0tY29sb3I6IGJsYWNrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICA6aG9zdCB7XHJcbiAgICAgICAgICAgICAgICAtLWJsdXI6IDA7XHJcbiAgICAgICAgICAgICAgICB6LWluZGV4OiAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICA6aG9zdC5tZCB7XHJcbiAgICAgICAgICAgICAgICAtd2Via2l0LWJveC1zaGFkb3c6IDBweCAycHggNXB4IDBweCByZ2JhKDAsIDAsIDAsIDAuNTMpO1xyXG4gICAgICAgICAgICAgICAgLW1vei1ib3gtc2hhZG93OiAwcHggMnB4IDVweCAwcHggcmdiYSgwLCAwLCAwLCAwLjUzKTtcclxuICAgICAgICAgICAgICAgIGJveC1zaGFkb3c6IDBweCAycHggNXB4IDBweCByZ2JhKDAsIDAsIDAsIDAuNTMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICA6aG9zdC5pb3Mge1xyXG4gICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICM1YTVlNjM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICA8L3N0eWxlPlxyXG4gICAgICAgIDxkaXYgY2xhc3M9XCJvdmVybGF5XCI+PC9kaXY+XHJcbiAgICAgICAgPG5nLWNvbnRlbnQ+PC9uZy1jb250ZW50PlxyXG4gICAgYFxyXG59KVxyXG5leHBvcnQgY2xhc3MgSGlkZW5hdlN0cmV0Y2hoZWFkZXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIEFmdGVyVmlld0luaXQge1xyXG4gICAgQENvbnRlbnRDaGlsZCgnc2hyaW5rZXhwYW5kJywge3JlYWQ6IEVsZW1lbnRSZWZ9KSBoZWFkZXI6IEVsZW1lbnRSZWY7XHJcbiAgICBAQ29udGVudENoaWxkcmVuKCdzdGF0aWMnLCB7cmVhZDogRWxlbWVudFJlZn0pIHN0YXRpYzogYW55O1xyXG4gICAgQEhvc3RCaW5kaW5nKCdjbGFzcycpIGNsYXNzOiBhbnk7XHJcbiAgICBuYW1lOiBhbnk7XHJcbiAgICBASW5wdXQoJ25vLWJvcmRlcicpIG5vQm9yZGVyOiBzdHJpbmc7XHJcbiAgICBASW5wdXQoJ2hlYWRlci1oZWlnaHQnKSBoZWFkZXJIZWlnaHQ6IGFueTtcclxuICAgIEBJbnB1dCgnaW5pdC1leHBhbmRlZCcpIGluaXRFeHBhbmRlZDogYW55O1xyXG4gICAgQElucHV0KCdvcGFjaXR5LWNvbG9yJykgb3BhY2l0eUNvbG9yOiBhbnk7XHJcbiAgICBASW5wdXQoJ29wYWNpdHktZmFjdG9yJykgb3BhY2l0eUZhY3RvcjogYW55O1xyXG4gICAgQElucHV0KCdibHVyLWZhY3RvcicpIGJsdXJGYWN0b3I6IGFueTtcclxuICAgIEBJbnB1dCgncHJlc2VydmUtaGVhZGVyJykgcHJlc2VydmVIZWFkZXI6IGFueTtcclxuXHJcbiAgICBAT3V0cHV0KCkgc2Nyb2xsOiBFdmVudEVtaXR0ZXI8bnVtYmVyPiA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyPigpO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBlbDogRWxlbWVudFJlZiwgcHVibGljIGdsb2JhbHM6IEhpZGVuYXZTaFNlcnZpY2UpIHtcclxuICAgIH1cclxuXHJcbiAgICBuZ09uSW5pdCgpIHtcclxuICAgIH1cclxuXHJcbiAgICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XHJcbiAgICAgICAgICAgIG11dGF0aW9ucy5mb3JFYWNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmKHRoaXMuZWwubmF0aXZlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hpZGVuYXYtc2gtaGVhZGVyJykubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSA9IHRoaXMuZWwubmF0aXZlRWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2hpZGVuYXYtc2gtaGVhZGVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIG9ic2VydmVyLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0aGlzLmVsLm5hdGl2ZUVsZW1lbnQsIHtcclxuICAgICAgICAgICAgYXR0cmlidXRlczogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBzdGFydCgpIHtcclxuICAgICAgICBpZih0aGlzLm5hbWUpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmdsb2JhbHMuZGF0YVt0aGlzLm5hbWVdID09ICd1bmRlZmluZWQnIHx8IHRoaXMuZ2xvYmFscy5kYXRhW3RoaXMubmFtZV0gPT0gbnVsbClcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2xvYmFscy5kYXRhW3RoaXMubmFtZV0gPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5nbG9iYWxzLmRhdGFbdGhpcy5uYW1lXS5oZWFkZXIgPSB0aGlzLmhlYWRlcjtcclxuICAgICAgICAgICAgdGhpcy5nbG9iYWxzLmRhdGFbdGhpcy5uYW1lXS5zdGF0aWMgPSB0aGlzLnN0YXRpYztcclxuICAgICAgICAgICAgdGhpcy5nbG9iYWxzLmluaXRpYXRlKHRoaXMubmFtZSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2xvYmFscy5zY3JvbGwuc3Vic2NyaWJlKHJlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzLm5hbWUgPT0gdGhpcy5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGwuZW1pdChyZXMuaGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vQm9yZGVyICE9ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgbGV0IG1vZGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykuZ2V0QXR0cmlidXRlKCdtb2RlJyk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMuY2xhc3MgPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzcyA9IG1vZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGFzcyArPSAnICcgKyBtb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGV4cGFuZChkdXJhdGlvbiA9IDIwMCkge1xyXG4gICAgICAgIHRoaXMuZ2xvYmFscy5leHBhbmQodGhpcy5uYW1lLCBkdXJhdGlvbik7XHJcbiAgICB9XHJcblxyXG4gICAgc2hyaW5rKGR1cmF0aW9uID0gMjAwKSB7XHJcbiAgICAgICAgdGhpcy5nbG9iYWxzLnNocmluayh0aGlzLm5hbWUsIGR1cmF0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICB0b2dnbGUoZHVyYXRpb24gPSAyMDApIHtcclxuICAgICAgICB0aGlzLmdsb2JhbHMudG9nZ2xlKHRoaXMubmFtZSwgZHVyYXRpb24pO1xyXG4gICAgfVxyXG5cclxuICAgIG5nT25EZXN0cm95KCkge1xyXG4gICAgICAgIGlmKHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5nbG9iYWxzLmRhdGFbdGhpcy5uYW1lXS5oZWFkZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG4iXX0=