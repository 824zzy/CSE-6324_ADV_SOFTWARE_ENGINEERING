/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import { Injectable } from '@angular/core';
import { Subject } from 'rxjs';
import * as i0 from "@angular/core";
export class HidenavShService {
    constructor() {
        this.data = [];
        this.mode = 'ios';
        this.names = [];
        this.tabnames = [];
        this.scroll = new Subject();
    }
    /**
     * @return {?}
     */
    requestName() {
        /** @type {?} */
        let name = 'page' + this.names.length;
        this.names.push(name);
        return name;
    }
    /**
     * @param {?} name
     * @return {?}
     */
    requestTabName(name) {
        if (!this.tabnames[name])
            this.tabnames[name] = [];
        /** @type {?} */
        let tabname = name + 'tab' + this.tabnames[name].length;
        this.tabnames[name].push(tabname);
        return tabname;
    }
    /**
     * @param {?} name
     * @return {?}
     */
    initiate(name) {
        /** @type {?} */
        let names = [];
        for (let key in this.data) {
            if (this.data[key].parent == name)
                names.push(key);
        }
        for (let name of names) {
            this.initiate2(name);
        }
        if (names.length == 0)
            this.initiate2(name);
    }
    /**
     * @param {?} name
     * @return {?}
     */
    initiate2(name) {
        if (!(this.data[name] && (this.data[name].parent && this.data[this.data[name].parent] && this.data[this.data[name].parent].tabscontent && this.data[name].content && this.data[this.data[name].parent].header) || (!this.data[name].parent && this.data[name].content && this.data[name].header)))
            return false;
        /** @type {?} */
        let parent = this.data[name].parent;
        /** @type {?} */
        let content = this.data[name].content;
        if (this.data[name].lastscroll == null)
            this.data[name].lastscroll = 0;
        if (this.data[name].guardEvents == null)
            this.data[name].guardEvents = true;
        content.scrollEvents = true;
        if (!parent) {
            /** @type {?} */
            let header = this.data[name].header;
            if (this.data[name].static) {
                this.data[name].static.forEach((/**
                 * @param {?} el
                 * @return {?}
                 */
                el => {
                    el.nativeElement.style.position = 'absolute';
                    el.nativeElement.style.zIndex = 102;
                }));
            }
            if (header) {
                /** @type {?} */
                let parentElem = header.nativeElement.parentNode;
                /** @type {?} */
                let elem = header.nativeElement;
                if (parentElem.getAttribute('init-expanded') == 'true')
                    this.data[name].initExpanded = true;
                /** @type {?} */
                let notchHeight = parseInt(getComputedStyle(document.documentElement).getPropertyValue("--ion-safe-area-top"), 10);
                this.data[name].shrinkexpandheaderHeight = parseInt(parentElem.getAttribute('header-height'), 10) + notchHeight;
                this.data[name].opacityFactor = parseInt(parentElem.getAttribute('opacity-factor'), 10);
                this.data[name].opacityColor = parentElem.getAttribute('opacity-color');
                this.data[name].blurFactor = parseInt(parentElem.getAttribute('blur-factor'), 10);
                parentElem.style.height = this.data[name].shrinkexpandheaderHeight + 'px';
                parentElem.style.overflow = 'hidden';
                parentElem.style.position = 'absolute';
                elem.style.position = 'absolute';
                parentElem.style.width = '100%';
                elem.style.width = '100%';
                this.waitforelem(name, 'this.data[name].header.nativeElement.scrollHeight', 'proceedShrinkExpand');
            }
        }
        else if (parent) {
            /** @type {?} */
            let header = this.data[parent].header;
            /** @type {?} */
            let tabscontentElem = this.data[parent].tabscontentElem;
            if (this.data[parent].static) {
                this.data[parent].static.forEach((/**
                 * @param {?} el
                 * @return {?}
                 */
                el => {
                    el.nativeElement.style.position = 'absolute';
                    el.nativeElement.style.zIndex = 102;
                }));
            }
            if (header) {
                /** @type {?} */
                let supertabsToolbar = tabscontentElem.nativeElement.querySelector('super-tabs-toolbar');
                /** @type {?} */
                let parentElem = header.nativeElement.parentNode;
                /** @type {?} */
                let elem = header.nativeElement;
                if (parentElem.getAttribute('init-expanded') == 'true')
                    this.data[name].initExpanded = true;
                if (parentElem.getAttribute('preserve-header') == 'true') {
                    this.data[name].preserveHeader = true;
                    this.data[parent].preserveHeader = true;
                }
                /** @type {?} */
                let notchHeight = parseInt(getComputedStyle(document.documentElement).getPropertyValue("--ion-safe-area-top"), 10);
                this.data[name].shrinkexpandheaderHeight = parseInt(parentElem.getAttribute('header-height'), 10) + notchHeight;
                this.data[name].opacityFactor = parseInt(parentElem.getAttribute('opacity-factor'), 10);
                this.data[name].opacityColor = elem.getAttribute('opacity-color');
                this.data[name].blurFactor = parseInt(parentElem.getAttribute('blur-factor'), 10);
                parentElem.style.height = this.data[name].shrinkexpandheaderHeight + 'px';
                parentElem.style.overflow = 'hidden';
                parentElem.style.position = 'absolute';
                elem.style.position = 'absolute';
                parentElem.style.width = '100%';
                elem.style.width = '100%';
                supertabsToolbar.style.position = 'absolute';
                supertabsToolbar.style.transform = 'translate3d(0, ' + this.data[name].shrinkexpandheaderHeight + 'px, 0)';
                parentElem.style.zIndex = 101;
                this.waitforelemTabs(name, 'this.data[this.data[name].parent].header.nativeElement.scrollHeight', 'this.data[this.data[name].parent].tabscontentElem.nativeElement.querySelector(\'super-tabs-toolbar\').clientHeight', 'proceedShrinkExpandTabs');
            }
        }
    }
    /**
     * @param {?} name
     * @param {?} evaluate
     * @param {?} func
     * @return {?}
     */
    waitforelem(name, evaluate, func) {
        /** @type {?} */
        let x = eval(evaluate);
        if (!{ x } || x < this.data[name].shrinkexpandheaderHeight) {
            window.requestAnimationFrame(this.waitforelem.bind(this, name, evaluate, func));
        }
        else {
            this[func](name);
        }
    }
    /**
     * @param {?} name
     * @param {?} evaluate
     * @param {?} evaluate2
     * @param {?} func
     * @return {?}
     */
    waitforelemTabs(name, evaluate, evaluate2, func) {
        /** @type {?} */
        let x = eval(evaluate);
        /** @type {?} */
        let y = eval(evaluate2);
        if (!{ x } || x < this.data[name].shrinkexpandheaderHeight || !{ y } || y == 0) {
            window.requestAnimationFrame(this.waitforelemTabs.bind(this, name, evaluate, evaluate2, func));
        }
        else {
            this[func](name);
        }
    }
    /**
     * @param {?} name
     * @return {?}
     */
    proceedShrinkExpand(name) {
        /** @type {?} */
        let parentElem = this.data[name].header.nativeElement.parentNode;
        /** @type {?} */
        let elem = this.data[name].header.nativeElement;
        /** @type {?} */
        let overlay = this.data[name].header.nativeElement.parentNode.querySelector('.overlay');
        if (this.data[name].opacityColor) {
            overlay.style.setProperty('--color', this.data[name].opacityColor);
        }
        if (this.data[name].opacityFactor > 0) {
            //angular decides that opacity is bad and changes it to alpha which doesn't work lol
            overlay.style.setProperty('filter', 'opacity(var(--opacity))');
            overlay.style.setProperty('--opacity', this.data[name].opacityFactor / 10);
        }
        if (this.data[name].blurFactor > 0) {
            elem.style.setProperty('filter', 'blur(var(--blur))');
            elem.style.setProperty('--blur', this.data[name].blurFactor / 10);
        }
        this.data[name].shrinkexpandHeight = this.data[name].shrinkexpandheaderHeight;
        this.data[name].shrinkexpandHeight = this.data[name].header.nativeElement.scrollHeight;
        elem.style.transform = 'translate3d(0, ' + -((this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight) / 2) + 'px, 0)';
        this.data[name].content.getScrollElement().then((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            this.data[name].contentElem = res;
            this.data[name].paddingTop = parseInt(window.getComputedStyle(this.data[name].contentElem)['padding-top'], 10);
            this.data[name].contentElem.style.paddingTop = (this.data[name].shrinkexpandHeight + this.data[name].paddingTop) + 'px';
            //this.data[name].contentElem.style.marginTop = this.data[name].shrinkexpandheaderHeight + 'px';
            /** @type {?} */
            let elemPad = document.createElement('div');
            elemPad.style.cssText = 'background:rgba(0,0,0,0)';
            /** @type {?} */
            let x = this.data[name].contentElem.scrollHeight + (this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight);
            //experimental height
            elemPad.style.height = x + 'px';
            setTimeout((/**
             * @return {?}
             */
            () => {
                //check if height is still ok and adjust if not
                this.data[name].elemPadHeight = Math.max(0, (x - (this.data[name].contentElem.scrollHeight - this.data[name].contentElem.offsetHeight) + (this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight)));
                elemPad.style.height = this.data[name].elemPadHeight + 'px';
            }), 100);
            this.data[name].contentElem.appendChild(elemPad);
            /** @type {?} */
            let scrollDist = this.data[name].initExpanded ? 2 : (this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight);
            this.data[name].content.scrollByPoint(0, scrollDist, 0).then((/**
             * @return {?}
             */
            () => {
                this.data[name].contentHeight = this.data[name].contentEl.nativeElement.clientHeight;
                this.data[name].content.scrollEvents = true;
                this.data[name].content.ionScroll.subscribe((/**
                 * @param {?} e
                 * @return {?}
                 */
                e => {
                    if (e.detail.scrollTop == 0) {
                        this.data[name].contentElem.style.paddingTop = 0;
                        this.data[name].contentEl.nativeElement.style.height = (this.data[name].contentHeight - this.data[name].shrinkexpandHeight) + 'px';
                        this.data[name].contentEl.nativeElement.style.top = (this.data[name].shrinkexpandHeight + this.data[name].paddingTop) + 'px';
                        elemPad.style.height = (this.data[name].elemPadHeight + this.data[name].shrinkexpandHeight + this.data[name].paddingTop) + 'px';
                    }
                    else {
                        /** @type {?} */
                        let s = e.detail.scrollTop;
                        this.data[name].contentElem.style.paddingTop = (this.data[name].shrinkexpandHeight + this.data[name].paddingTop) + 'px';
                        this.data[name].contentEl.nativeElement.style.height = (this.data[name].contentHeight + this.data[name].shrinkexpandHeight) + 'px';
                        this.data[name].contentEl.nativeElement.style.top = null;
                        this.data[name].contentElem.scrollTop = s;
                        elemPad.style.height = this.data[name].elemPadHeight + 'px';
                    }
                    if (this.data[name].initExpanded) {
                        this.data[name].content.scrollToPoint(0, 0, 0).then((/**
                         * @return {?}
                         */
                        () => {
                            this.data[name].initExpanded = false;
                        }));
                    }
                    if (this.data[name].initExpanded) {
                        this.data[name].content.scrollToPoint(0, 0, 0).then((/**
                         * @return {?}
                         */
                        () => {
                            this.data[name].initExpanded = false;
                        }));
                    }
                    /** @type {?} */
                    let height = Math.max(Math.min(this.data[name].shrinkexpandHeight, this.data[name].shrinkexpandHeight - e.detail.scrollTop), this.data[name].shrinkexpandheaderHeight);
                    elem.style.transform = 'translate3d(0, ' + -(Math.min((this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight) / 2, e.detail.scrollTop / 2)) + 'px, 0)';
                    parentElem.style.height = height + 'px';
                    /** @type {?} */
                    let scrollFactor = Math.min(e.detail.scrollTop / (this.data[name].shrinkexpandHeight / 2), 1);
                    if (scrollFactor >= 0) {
                        /** @type {?} */
                        let currentValOpacity = overlay.style.getPropertyValue('--opacity');
                        /** @type {?} */
                        let newValOpacity = this.data[name].opacityFactor / 10 * scrollFactor;
                        if (currentValOpacity != newValOpacity)
                            overlay.style.setProperty('--opacity', newValOpacity);
                        /** @type {?} */
                        let currentValBlur = elem.style.getPropertyValue('--blur');
                        /** @type {?} */
                        let newValBlur = (this.data[name].blurFactor * scrollFactor) + 'px';
                        if (currentValBlur != newValBlur)
                            elem.style.setProperty('--blur', newValBlur);
                    }
                    //event emitter
                    setTimeout((/**
                     * @return {?}
                     */
                    () => {
                        this.data[name].guardEvents = false;
                    }), 10);
                    if (this.data[name].lastscroll != height && !this.data[name].guardEvents) {
                        this.scroll.next({ name: this.data[name].parent ? this.data[name].parent : name, height: height });
                    }
                    this.data[name].lastscroll = height;
                    //
                }));
                //catch the last tick
                this.data[name].content.ionScrollEnd.subscribe((/**
                 * @return {?}
                 */
                () => {
                    setTimeout((/**
                     * @return {?}
                     */
                    () => {
                        if (this.data[name].contentElem.scrollTop == 0) {
                            this.data[name].contentElem.style.paddingTop = 0;
                            this.data[name].contentEl.nativeElement.style.height = (this.data[name].contentHeight - this.data[name].shrinkexpandHeight) + 'px';
                            this.data[name].contentEl.nativeElement.style.top = (this.data[name].shrinkexpandHeight + this.data[name].paddingTop) + 'px';
                            elemPad.style.height = (this.data[name].elemPadHeight + this.data[name].shrinkexpandHeight + this.data[name].paddingTop) + 'px';
                        }
                    }), 10);
                }));
            }));
        }));
    }
    /**
     * @param {?} name
     * @return {?}
     */
    proceedShrinkExpandTabs(name) {
        /** @type {?} */
        let parent = this.data[name].parent;
        /** @type {?} */
        let parentElem = this.data[parent].header.nativeElement.parentNode;
        /** @type {?} */
        let elem = this.data[parent].header.nativeElement;
        /** @type {?} */
        let tabscontentElem = this.data[parent].tabscontentElem;
        /** @type {?} */
        let supertabsToolbar = tabscontentElem.nativeElement.querySelector('super-tabs-toolbar');
        /** @type {?} */
        let overlay = this.data[parent].header.nativeElement.parentNode.querySelector('.overlay');
        if (this.data[name].opacityColor) {
            overlay.style.setProperty('--color', this.data[name].opacityColor);
        }
        if (this.data[name].opacityFactor > 0) {
            //angular decides that opacity is bad and changes it to alpha which doesn't work lol
            overlay.style.setProperty('filter', 'opacity(var(--opacity))');
            overlay.style.setProperty('--opacity', this.data[name].opacityFactor / 10);
        }
        if (this.data[name].blurFactor > 0) {
            elem.style.setProperty('filter', 'blur(var(--blur))');
            elem.style.setProperty('--blur', this.data[name].blurFactor / 10);
        }
        this.data[name].shrinkexpandHeight = this.data[name].shrinkexpandheaderHeight;
        this.data[name].shrinkexpandHeight = elem.scrollHeight;
        elem.style.transform = 'translate3d(0, ' + -((this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight) / 2) + 'px, 0)';
        this.data[name].content.getScrollElement().then((/**
         * @param {?} res
         * @return {?}
         */
        res => {
            this.data[name].contentElem = res;
            this.data[name].paddingTop = parseInt(window.getComputedStyle(this.data[name].contentElem)['padding-top'], 10);
            this.data[name].contentElem.style.paddingTop = (this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight + this.data[name].paddingTop) + 'px';
            this.data[name].contentElem.style.height = (this.data[parent].tabscontentElem.nativeElement.clientHeight) + 'px';
            //this.data[name].contentElem.style.marginTop = this.data[name].shrinkexpandheaderHeight + 'px';
            /** @type {?} */
            let elemPad = document.createElement('div');
            elemPad.style.cssText = 'background:rgba(0,0,0,0)';
            /** @type {?} */
            let x = this.data[name].contentElem.scrollHeight + (this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight);
            //experimental height
            elemPad.style.height = x + 'px';
            setTimeout((/**
             * @return {?}
             */
            () => {
                //check if height is still ok and adjust if not
                this.data[name].elemPadHeight = Math.max(0, (x - (this.data[name].contentElem.scrollHeight - this.data[name].contentElem.offsetHeight) + (this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight)));
                elemPad.style.height = this.data[name].elemPadHeight + 'px';
            }), 100);
            this.data[name].contentElem.appendChild(elemPad);
            /** @type {?} */
            let scrollDist = this.data[name].initExpanded ? 2 : (this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight);
            this.data[name].content.scrollByPoint(0, scrollDist, 0).then((/**
             * @return {?}
             */
            () => {
                this.data[name].contentHeight = this.data[name].contentEl.nativeElement.clientHeight;
                this.data[name].content.scrollEvents = true;
                this.data[name].content.ionScroll.subscribe((/**
                 * @param {?} e
                 * @return {?}
                 */
                e => {
                    if (e.detail.scrollTop == 0) {
                        this.data[name].contentElem.style.paddingTop = 0;
                        this.data[name].contentEl.nativeElement.style.height = (this.data[name].contentHeight - (this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight)) + 'px';
                        this.data[name].contentEl.nativeElement.style.top = (this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight + this.data[name].paddingTop) + 'px';
                        elemPad.style.height = (this.data[name].elemPadHeight + this.data[name].shrinkexpandHeight + this.data[name].paddingTop + supertabsToolbar.clientHeight) + 'px';
                    }
                    else {
                        /** @type {?} */
                        let s = e.detail.scrollTop;
                        this.data[name].contentElem.style.paddingTop = (this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight + this.data[name].paddingTop) + 'px';
                        this.data[name].contentEl.nativeElement.style.height = (this.data[name].contentHeight + this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight) + 'px';
                        this.data[name].contentEl.nativeElement.style.top = null;
                        this.data[name].contentElem.scrollTop = s;
                        elemPad.style.height = this.data[name].elemPadHeight + 'px';
                    }
                    if (this.data[name].initExpanded) {
                        this.data[name].content.scrollToPoint(0, 0, 0).then((/**
                         * @return {?}
                         */
                        () => {
                            this.data[name].initExpanded = false;
                        }));
                    }
                    /** @type {?} */
                    let height = Math.max(Math.min(this.data[name].shrinkexpandHeight, this.data[name].shrinkexpandHeight - e.detail.scrollTop), this.data[name].shrinkexpandheaderHeight);
                    elem.style.transform = 'translate3d(0, ' + -(Math.min((this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight) / 2, e.detail.scrollTop / 2)) + 'px, 0)';
                    parentElem.style.height = height + 'px';
                    /** @type {?} */
                    let scrollFactor = Math.min(e.detail.scrollTop / (this.data[name].shrinkexpandHeight / 2), 1);
                    if (scrollFactor >= 0) {
                        /** @type {?} */
                        let currentValOpacity = overlay.style.getPropertyValue('--opacity');
                        /** @type {?} */
                        let newValOpacity = this.data[name].opacityFactor / 10 * scrollFactor;
                        if (currentValOpacity != newValOpacity)
                            overlay.style.setProperty('--opacity', newValOpacity);
                        /** @type {?} */
                        let currentValBlur = elem.style.getPropertyValue('--blur');
                        /** @type {?} */
                        let newValBlur = (this.data[name].blurFactor * scrollFactor) + 'px';
                        if (currentValBlur != newValBlur)
                            elem.style.setProperty('--blur', newValBlur);
                    }
                    supertabsToolbar.style.transform = 'translate3d(0, ' + height + 'px, 0)';
                    //event emitter
                    setTimeout((/**
                     * @return {?}
                     */
                    () => {
                        this.data[name].guardEvents = false;
                    }), 10);
                    if (this.data[name].lastscroll != height && !this.data[name].guardEvents) {
                        this.scroll.next({ name: this.data[name].parent ? this.data[name].parent : name, height: height });
                    }
                    this.data[name].lastscroll = height;
                    //
                }));
                //catch the last tick
                this.data[name].content.ionScrollEnd.subscribe((/**
                 * @return {?}
                 */
                () => {
                    setTimeout((/**
                     * @return {?}
                     */
                    () => {
                        if (this.data[name].contentElem.scrollTop == 0) {
                            this.data[name].contentElem.style.paddingTop = 0;
                            this.data[name].contentEl.nativeElement.style.height = (this.data[name].contentHeight - (this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight)) + 'px';
                            this.data[name].contentEl.nativeElement.style.top = (this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight + this.data[name].paddingTop) + 'px';
                            elemPad.style.height = (this.data[name].elemPadHeight + this.data[name].shrinkexpandHeight + this.data[name].paddingTop + supertabsToolbar.clientHeight) + 'px';
                        }
                    }), 10);
                }));
            }));
        }));
    }
    /**
     * @param {?} name
     * @return {?}
     */
    resetContent(name) {
        if (!this.data[name].preserveHeader) {
            /** @type {?} */
            let parent = this.data[name].parent;
            /** @type {?} */
            let height = parseInt(this.data[parent].header.nativeElement.parentNode.style.height, 10);
            if (height <= this.data[name].shrinkexpandHeight && height > this.data[name].shrinkexpandheaderHeight || height == this.data[name].shrinkexpandheaderHeight && this.data[name].contentElem.scrollTop < (this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight)) {
                this.data[name].contentElem.scrollTop = this.data[name].shrinkexpandHeight - height;
            }
        }
        else {
            /** @type {?} */
            let parent = this.data[name].parent;
            /** @type {?} */
            let parentElem = this.data[parent].header.nativeElement.parentNode;
            /** @type {?} */
            let elem = this.data[parent].header.nativeElement;
            /** @type {?} */
            let tabscontentElem = this.data[parent].tabscontentElem;
            /** @type {?} */
            let supertabsToolbar = tabscontentElem.nativeElement.querySelector('super-tabs-toolbar');
            /** @type {?} */
            let overlay = this.data[parent].header.nativeElement.parentNode.querySelector('.overlay');
            /** @type {?} */
            let height = Math.max(Math.min(this.data[name].shrinkexpandHeight, this.data[name].shrinkexpandHeight - this.data[name].contentElem.scrollTop), this.data[name].shrinkexpandheaderHeight);
            elem.style.transform = 'translate3d(0, ' + -(Math.min((this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight) / 2, this.data[name].contentElem.scrollTop / 2)) + 'px, 0)';
            parentElem.style.height = height + 'px';
            overlay.style.setProperty('--opacity', this.data[name].opacityFactor / 10 * Math.min(this.data[name].contentElem.scrollTop / (this.data[name].shrinkexpandHeight / 2), 1));
            elem.style.setProperty('--blur', (this.data[name].blurFactor * Math.min(this.data[name].contentElem.scrollTop / (this.data[name].shrinkexpandHeight / 2), 1)) + 'px');
            supertabsToolbar.style.transform = 'translate3d(0, ' + height + 'px, 0)';
            this.scroll.next({ name: this.data[name].parent, height: height });
        }
    }
    /**
     * @param {?} parent
     * @return {?}
     */
    findCurrentTab(parent) {
        /** @type {?} */
        let i = this.data[parent].supertabs.activeTabIndex;
        /** @type {?} */
        let tabs = this.data[parent].tabscontentElem.nativeElement.querySelectorAll('super-tab');
        /** @type {?} */
        let results = [];
        for (let tab of tabs) {
            /** @type {?} */
            let cont = tab.querySelector('ion-content');
            if (cont.attributes['hidenav-sh-content'])
                results.push(cont.attributes['hidenav-sh-content'].nodeValue);
            else
                results.push(null);
        }
        if (results[i] != null) {
            return results[i];
        }
        return null;
    }
    /**
     * @param {?} parent
     * @param {?=} duration
     * @return {?}
     */
    expand(parent, duration = 200) {
        if (this.data[parent].content) {
            this.data[parent].content.scrollToPoint(0, 0, duration);
        }
        else {
            if (!this.data[parent].preserveHeader) {
                /** @type {?} */
                let names = [];
                for (let key in this.data) {
                    if (this.data[key].parent == parent)
                        names.push(key);
                }
                for (let name of names)
                    this.data[name].content.scrollToPoint(0, 0, duration);
            }
            else {
                /** @type {?} */
                let currentTab = this.findCurrentTab(parent);
                this.data[currentTab].content.scrollToPoint(0, 0, duration);
            }
        }
    }
    /**
     * @param {?} parent
     * @param {?=} duration
     * @return {?}
     */
    shrink(parent, duration = 200) {
        /** @type {?} */
        let height = parseInt(this.data[parent].header.nativeElement.parentNode.style.height, 10);
        if (height > this.data[parent].shrinkexpandheaderHeight) {
            if (this.data[parent].content) {
                this.data[parent].content.scrollToPoint(0, (this.data[parent].shrinkexpandHeight - this.data[parent].shrinkexpandheaderHeight), duration);
            }
            else {
                if (!this.data[parent].preserveHeader) {
                    /** @type {?} */
                    let names = [];
                    for (let key in this.data) {
                        if (this.data[key].parent == parent)
                            names.push(key);
                    }
                    for (let name of names) {
                        this.data[name].content.scrollToPoint(0, (this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight), duration);
                    }
                }
                else {
                    /** @type {?} */
                    let currentTab = this.findCurrentTab(parent);
                    this.data[currentTab].content.scrollToPoint(0, (this.data[currentTab].shrinkexpandHeight - this.data[currentTab].shrinkexpandheaderHeight), duration);
                }
            }
        }
    }
    /**
     * @param {?} parent
     * @param {?=} duration
     * @return {?}
     */
    toggle(parent, duration = 200) {
        if (this.data[parent].content) {
            /** @type {?} */
            let height = parseInt(this.data[parent].header.nativeElement.parentNode.style.height, 10);
            if (height < this.data[parent].shrinkexpandHeight)
                this.data[parent].content.scrollToPoint(0, 0, duration);
            else
                this.data[parent].content.scrollToPoint(0, (this.data[parent].shrinkexpandHeight - this.data[parent].shrinkexpandheaderHeight), duration);
        }
        else {
            if (!this.data[parent].preserveHeader) {
                /** @type {?} */
                let names = [];
                for (let key in this.data) {
                    if (this.data[key].parent == parent)
                        names.push(key);
                }
                /** @type {?} */
                let height = parseInt(this.data[parent].header.nativeElement.parentNode.style.height, 10);
                for (let name of names) {
                    if (height < this.data[name].shrinkexpandHeight)
                        this.data[name].content.scrollToPoint(0, 0, duration);
                    else
                        this.data[name].content.scrollToPoint(0, (this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight), duration);
                }
            }
            else {
                /** @type {?} */
                let currentTab = this.findCurrentTab(parent);
                /** @type {?} */
                let height = parseInt(this.data[parent].header.nativeElement.parentNode.style.height, 10);
                if (height < this.data[currentTab].shrinkexpandHeight)
                    this.data[currentTab].content.scrollToPoint(0, 0, duration);
                else
                    this.data[currentTab].content.scrollToPoint(0, (this.data[currentTab].shrinkexpandHeight - this.data[currentTab].shrinkexpandheaderHeight), duration);
            }
        }
    }
}
HidenavShService.decorators = [
    { type: Injectable, args: [{
                providedIn: 'root'
            },] }
];
HidenavShService.ctorParameters = () => [];
/** @nocollapse */ HidenavShService.ngInjectableDef = i0.defineInjectable({ factory: function HidenavShService_Factory() { return new HidenavShService(); }, token: HidenavShService, providedIn: "root" });
if (false) {
    /** @type {?} */
    HidenavShService.prototype.data;
    /** @type {?} */
    HidenavShService.prototype.mode;
    /** @type {?} */
    HidenavShService.prototype.names;
    /** @type {?} */
    HidenavShService.prototype.tabnames;
    /** @type {?} */
    HidenavShService.prototype.scroll;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlkZW5hdi1zaC1zZXJ2aWNlLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9pb25pYzQtaGlkZW5hdi8iLCJzb3VyY2VzIjpbImxpYi9oaWRlbmF2LXNoLXNlcnZpY2Uuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQUEsT0FBTyxFQUFDLFVBQVUsRUFBQyxNQUFNLGVBQWUsQ0FBQztBQUN6QyxPQUFPLEVBQUMsT0FBTyxFQUFDLE1BQU0sTUFBTSxDQUFDOztBQUs3QixNQUFNO0lBc0JGO1FBcEJBLFNBQUksR0FBRyxFQUFFLENBQUM7UUFDVixTQUFJLEdBQVEsS0FBSyxDQUFDO1FBQ2xCLFVBQUssR0FBRyxFQUFFLENBQUM7UUFDWCxhQUFRLEdBQUcsRUFBRSxDQUFDO1FBa0JWLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxPQUFPLEVBQUUsQ0FBQztJQUNoQyxDQUFDOzs7O0lBaEJELFdBQVc7O1lBQ0gsSUFBSSxHQUFHLE1BQU0sR0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU07UUFDbkMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDdEIsT0FBTyxJQUFJLENBQUM7SUFDaEIsQ0FBQzs7Ozs7SUFFRCxjQUFjLENBQUMsSUFBSTtRQUNmLElBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQztZQUNuQixJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQzs7WUFDekIsT0FBTyxHQUFHLElBQUksR0FBQyxLQUFLLEdBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxNQUFNO1FBQ25ELElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQ2xDLE9BQU8sT0FBTyxDQUFDO0lBQ25CLENBQUM7Ozs7O0lBTUQsUUFBUSxDQUFDLElBQUk7O1lBQ0wsS0FBSyxH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TyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLGtCQUFrQixHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsd0JBQXdCLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQzthQUU3SjtTQUNKO0lBQ0wsQ0FBQzs7O1lBemNKLFVBQVUsU0FBQztnQkFDUixVQUFVLEVBQUUsTUFBTTthQUNyQjs7Ozs7O0lBR0csZ0NBQVU7O0lBQ1YsZ0NBQWtCOztJQUNsQixpQ0FBVzs7SUFDWCxvQ0FBYzs7SUFDZCxrQ0FBWSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SW5qZWN0YWJsZX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcbmltcG9ydCB7U3ViamVjdH0gZnJvbSAncnhqcyc7XHJcblxyXG5ASW5qZWN0YWJsZSh7XHJcbiAgICBwcm92aWRlZEluOiAncm9vdCdcclxufSlcclxuZXhwb3J0IGNsYXNzIEhpZGVuYXZTaFNlcnZpY2Uge1xyXG5cclxuICAgIGRhdGEgPSBbXTtcclxuICAgIG1vZGU6IGFueSA9ICdpb3MnO1xyXG4gICAgbmFtZXMgPSBbXTtcclxuICAgIHRhYm5hbWVzID0gW107XHJcbiAgICBzY3JvbGw6IGFueTtcclxuXHJcbiAgICByZXF1ZXN0TmFtZSgpe1xyXG4gICAgICAgIGxldCBuYW1lID0gJ3BhZ2UnK3RoaXMubmFtZXMubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMubmFtZXMucHVzaChuYW1lKTtcclxuICAgICAgICByZXR1cm4gbmFtZTtcclxuICAgIH1cclxuXHJcbiAgICByZXF1ZXN0VGFiTmFtZShuYW1lKXtcclxuICAgICAgICBpZighdGhpcy50YWJuYW1lc1tuYW1lXSlcclxuICAgICAgICAgICAgdGhpcy50YWJuYW1lc1tuYW1lXSA9IFtdO1xyXG4gICAgICAgIGxldCB0YWJuYW1lID0gbmFtZSsndGFiJyt0aGlzLnRhYm5hbWVzW25hbWVdLmxlbmd0aDtcclxuICAgICAgICB0aGlzLnRhYm5hbWVzW25hbWVdLnB1c2godGFibmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIHRhYm5hbWU7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5zY3JvbGwgPSBuZXcgU3ViamVjdCgpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYXRlKG5hbWUpIHtcclxuICAgICAgICBsZXQgbmFtZXMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5kYXRhKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFba2V5XS5wYXJlbnQgPT0gbmFtZSlcclxuICAgICAgICAgICAgICAgIG5hbWVzLnB1c2goa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yIChsZXQgbmFtZSBvZiBuYW1lcykge1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRlMihuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKG5hbWVzLmxlbmd0aCA9PSAwKVxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYXRlMihuYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWF0ZTIobmFtZSkge1xyXG4gICAgICAgIGlmICghKHRoaXMuZGF0YVtuYW1lXSAmJiAodGhpcy5kYXRhW25hbWVdLnBhcmVudCAmJiB0aGlzLmRhdGFbdGhpcy5kYXRhW25hbWVdLnBhcmVudF0gJiYgdGhpcy5kYXRhW3RoaXMuZGF0YVtuYW1lXS5wYXJlbnRdLnRhYnNjb250ZW50ICYmIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50ICYmIHRoaXMuZGF0YVt0aGlzLmRhdGFbbmFtZV0ucGFyZW50XS5oZWFkZXIpIHx8ICghdGhpcy5kYXRhW25hbWVdLnBhcmVudCAmJiB0aGlzLmRhdGFbbmFtZV0uY29udGVudCAmJiB0aGlzLmRhdGFbbmFtZV0uaGVhZGVyKSkpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBsZXQgcGFyZW50ID0gdGhpcy5kYXRhW25hbWVdLnBhcmVudDtcclxuICAgICAgICBsZXQgY29udGVudCA9IHRoaXMuZGF0YVtuYW1lXS5jb250ZW50O1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGFbbmFtZV0ubGFzdHNjcm9sbCA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0ubGFzdHNjcm9sbCA9IDA7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5ndWFyZEV2ZW50cyA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uZ3VhcmRFdmVudHMgPSB0cnVlO1xyXG4gICAgICAgIGNvbnRlbnQuc2Nyb2xsRXZlbnRzID0gdHJ1ZTtcclxuICAgICAgICBpZiAoIXBhcmVudCkge1xyXG4gICAgICAgICAgICBsZXQgaGVhZGVyID0gdGhpcy5kYXRhW25hbWVdLmhlYWRlcjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5zdGF0aWMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5zdGF0aWMuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwubmF0aXZlRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwubmF0aXZlRWxlbWVudC5zdHlsZS56SW5kZXggPSAxMDI7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudEVsZW0gPSBoZWFkZXIubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW0gPSBoZWFkZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRFbGVtLmdldEF0dHJpYnV0ZSgnaW5pdC1leHBhbmRlZCcpID09ICd0cnVlJylcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uaW5pdEV4cGFuZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGxldCBub3RjaEhlaWdodCA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50KS5nZXRQcm9wZXJ0eVZhbHVlKFwiLS1pb24tc2FmZS1hcmVhLXRvcFwiKSwgMTApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCA9IHBhcnNlSW50KHBhcmVudEVsZW0uZ2V0QXR0cmlidXRlKCdoZWFkZXItaGVpZ2h0JyksIDEwKStub3RjaEhlaWdodDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5vcGFjaXR5RmFjdG9yID0gcGFyc2VJbnQocGFyZW50RWxlbS5nZXRBdHRyaWJ1dGUoJ29wYWNpdHktZmFjdG9yJyksIDEwKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5vcGFjaXR5Q29sb3IgPSBwYXJlbnRFbGVtLmdldEF0dHJpYnV0ZSgnb3BhY2l0eS1jb2xvcicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmJsdXJGYWN0b3IgPSBwYXJzZUludChwYXJlbnRFbGVtLmdldEF0dHJpYnV0ZSgnYmx1ci1mYWN0b3InKSwgMTApO1xyXG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbS5zdHlsZS5oZWlnaHQgPSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgIHBhcmVudEVsZW0uc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgICAgIHBhcmVudEVsZW0uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICAgICAgICAgICAgZWxlbS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRFbGVtLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgICAgICAgICAgZWxlbS5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICAgICAgICAgIHRoaXMud2FpdGZvcmVsZW0obmFtZSwgJ3RoaXMuZGF0YVtuYW1lXS5oZWFkZXIubmF0aXZlRWxlbWVudC5zY3JvbGxIZWlnaHQnLCAncHJvY2VlZFNocmlua0V4cGFuZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIGlmIChwYXJlbnQpIHtcclxuICAgICAgICAgICAgbGV0IGhlYWRlciA9IHRoaXMuZGF0YVtwYXJlbnRdLmhlYWRlcjtcclxuICAgICAgICAgICAgbGV0IHRhYnNjb250ZW50RWxlbSA9IHRoaXMuZGF0YVtwYXJlbnRdLnRhYnNjb250ZW50RWxlbTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtwYXJlbnRdLnN0YXRpYykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW3BhcmVudF0uc3RhdGljLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUuekluZGV4ID0gMTAyO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChoZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdXBlcnRhYnNUb29sYmFyOiBhbnkgPSB0YWJzY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdzdXBlci10YWJzLXRvb2xiYXInKTtcclxuICAgICAgICAgICAgICAgIGxldCBwYXJlbnRFbGVtID0gaGVhZGVyLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgICAgIGxldCBlbGVtID0gaGVhZGVyLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50RWxlbS5nZXRBdHRyaWJ1dGUoJ2luaXQtZXhwYW5kZWQnKSA9PSAndHJ1ZScpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmluaXRFeHBhbmRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBpZiAocGFyZW50RWxlbS5nZXRBdHRyaWJ1dGUoJ3ByZXNlcnZlLWhlYWRlcicpID09ICd0cnVlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5wcmVzZXJ2ZUhlYWRlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW3BhcmVudF0ucHJlc2VydmVIZWFkZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IG5vdGNoSGVpZ2h0ID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUoXCItLWlvbi1zYWZlLWFyZWEtdG9wXCIpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0ID0gcGFyc2VJbnQocGFyZW50RWxlbS5nZXRBdHRyaWJ1dGUoJ2hlYWRlci1oZWlnaHQnKSwgMTApK25vdGNoSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLm9wYWNpdHlGYWN0b3IgPSBwYXJzZUludChwYXJlbnRFbGVtLmdldEF0dHJpYnV0ZSgnb3BhY2l0eS1mYWN0b3InKSwgMTApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLm9wYWNpdHlDb2xvciA9IGVsZW0uZ2V0QXR0cmlidXRlKCdvcGFjaXR5LWNvbG9yJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uYmx1ckZhY3RvciA9IHBhcnNlSW50KHBhcmVudEVsZW0uZ2V0QXR0cmlidXRlKCdibHVyLWZhY3RvcicpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRFbGVtLnN0eWxlLmhlaWdodCA9IHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICAgICAgICAgIHBhcmVudEVsZW0uc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgICAgICAgICAgc3VwZXJ0YWJzVG9vbGJhci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgICAgICAgICBzdXBlcnRhYnNUb29sYmFyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLCAnICsgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCArICdweCwgMCknO1xyXG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbS5zdHlsZS56SW5kZXggPSAxMDE7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndhaXRmb3JlbGVtVGFicyhuYW1lLCAndGhpcy5kYXRhW3RoaXMuZGF0YVtuYW1lXS5wYXJlbnRdLmhlYWRlci5uYXRpdmVFbGVtZW50LnNjcm9sbEhlaWdodCcsICd0aGlzLmRhdGFbdGhpcy5kYXRhW25hbWVdLnBhcmVudF0udGFic2NvbnRlbnRFbGVtLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvcihcXCdzdXBlci10YWJzLXRvb2xiYXJcXCcpLmNsaWVudEhlaWdodCcsICdwcm9jZWVkU2hyaW5rRXhwYW5kVGFicycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdhaXRmb3JlbGVtKG5hbWUsIGV2YWx1YXRlLCBmdW5jKSB7XHJcbiAgICAgICAgbGV0IHggPSBldmFsKGV2YWx1YXRlKTtcclxuICAgICAgICBpZiAoIXt4fSB8fCB4IDwgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCkge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMud2FpdGZvcmVsZW0uYmluZCh0aGlzLCBuYW1lLCBldmFsdWF0ZSwgZnVuYykpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXNbZnVuY10obmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHdhaXRmb3JlbGVtVGFicyhuYW1lLCBldmFsdWF0ZSwgZXZhbHVhdGUyLCBmdW5jKSB7XHJcbiAgICAgICAgbGV0IHggPSBldmFsKGV2YWx1YXRlKTtcclxuICAgICAgICBsZXQgeSA9IGV2YWwoZXZhbHVhdGUyKTtcclxuICAgICAgICBpZiAoIXt4fSB8fCB4IDwgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCB8fCAhe3l9IHx8IHkgPT0gMCkge1xyXG4gICAgICAgICAgICB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMud2FpdGZvcmVsZW1UYWJzLmJpbmQodGhpcywgbmFtZSwgZXZhbHVhdGUsIGV2YWx1YXRlMiwgZnVuYykpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXNbZnVuY10obmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByb2NlZWRTaHJpbmtFeHBhbmQobmFtZSkge1xyXG4gICAgICAgIGxldCBwYXJlbnRFbGVtID0gdGhpcy5kYXRhW25hbWVdLmhlYWRlci5uYXRpdmVFbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgICAgICAgbGV0IGVsZW0gPSB0aGlzLmRhdGFbbmFtZV0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IG92ZXJsYXkgPSB0aGlzLmRhdGFbbmFtZV0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheScpO1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGFbbmFtZV0ub3BhY2l0eUNvbG9yKSB7XHJcbiAgICAgICAgICAgIG92ZXJsYXkuc3R5bGUuc2V0UHJvcGVydHkoJy0tY29sb3InLCB0aGlzLmRhdGFbbmFtZV0ub3BhY2l0eUNvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5vcGFjaXR5RmFjdG9yID4gMCkge1xyXG4gICAgICAgICAgICAvL2FuZ3VsYXIgZGVjaWRlcyB0aGF0IG9wYWNpdHkgaXMgYmFkIGFuZCBjaGFuZ2VzIGl0IHRvIGFscGhhIHdoaWNoIGRvZXNuJ3Qgd29yayBsb2xcclxuICAgICAgICAgICAgb3ZlcmxheS5zdHlsZS5zZXRQcm9wZXJ0eSgnZmlsdGVyJywgJ29wYWNpdHkodmFyKC0tb3BhY2l0eSkpJyk7XHJcbiAgICAgICAgICAgIG92ZXJsYXkuc3R5bGUuc2V0UHJvcGVydHkoJy0tb3BhY2l0eScsIHRoaXMuZGF0YVtuYW1lXS5vcGFjaXR5RmFjdG9yIC8gMTApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLmJsdXJGYWN0b3IgPiAwKSB7XHJcbiAgICAgICAgICAgIGVsZW0uc3R5bGUuc2V0UHJvcGVydHkoJ2ZpbHRlcicsICdibHVyKHZhcigtLWJsdXIpKScpO1xyXG4gICAgICAgICAgICBlbGVtLnN0eWxlLnNldFByb3BlcnR5KCctLWJsdXInLCB0aGlzLmRhdGFbbmFtZV0uYmx1ckZhY3RvciAvIDEwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCA9IHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCA9IHRoaXMuZGF0YVtuYW1lXS5oZWFkZXIubmF0aXZlRWxlbWVudC5zY3JvbGxIZWlnaHQ7XHJcbiAgICAgICAgZWxlbS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwgJyArIC0oKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSAvIDIpICsgJ3B4LCAwKSc7XHJcbiAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnQuZ2V0U2Nyb2xsRWxlbWVudCgpLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtID0gcmVzO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCA9IHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbSlbJ3BhZGRpbmctdG9wJ10sIDEwKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnN0eWxlLnBhZGRpbmdUb3AgPSAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wKSArICdweCc7XHJcbiAgICAgICAgICAgIC8vdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnN0eWxlLm1hcmdpblRvcCA9IHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICBsZXQgZWxlbVBhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBlbGVtUGFkLnN0eWxlLmNzc1RleHQgPSAnYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDApJztcclxuICAgICAgICAgICAgbGV0IHggPSB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc2Nyb2xsSGVpZ2h0ICsgKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KTtcclxuICAgICAgICAgICAgLy9leHBlcmltZW50YWwgaGVpZ2h0XHJcbiAgICAgICAgICAgIGVsZW1QYWQuc3R5bGUuaGVpZ2h0ID0geCArICdweCc7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy9jaGVjayBpZiBoZWlnaHQgaXMgc3RpbGwgb2sgYW5kIGFkanVzdCBpZiBub3RcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5lbGVtUGFkSGVpZ2h0ID0gTWF0aC5tYXgoMCwgKHggLSAodGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnNjcm9sbEhlaWdodCAtIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5vZmZzZXRIZWlnaHQpICsgKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSkpO1xyXG4gICAgICAgICAgICAgICAgZWxlbVBhZC5zdHlsZS5oZWlnaHQgPSB0aGlzLmRhdGFbbmFtZV0uZWxlbVBhZEhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5hcHBlbmRDaGlsZChlbGVtUGFkKTtcclxuICAgICAgICAgICAgbGV0IHNjcm9sbERpc3QgPSB0aGlzLmRhdGFbbmFtZV0uaW5pdEV4cGFuZGVkID8gMiA6ICh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0IC0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50LnNjcm9sbEJ5UG9pbnQoMCwgc2Nyb2xsRGlzdCwgMCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEhlaWdodCA9IHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWwubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudC5zY3JvbGxFdmVudHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnQuaW9uU2Nyb2xsLnN1YnNjcmliZShlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5kZXRhaWwuc2Nyb2xsVG9wID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnN0eWxlLnBhZGRpbmdUb3AgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gKHRoaXMuZGF0YVtuYW1lXS5jb250ZW50SGVpZ2h0IC0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgKyB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtUGFkLnN0eWxlLmhlaWdodCA9ICh0aGlzLmRhdGFbbmFtZV0uZWxlbVBhZEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgKyB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzID0gZS5kZXRhaWwuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc3R5bGUucGFkZGluZ1RvcCA9ICh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0ICsgdGhpcy5kYXRhW25hbWVdLnBhZGRpbmdUb3ApICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbC5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9ICh0aGlzLmRhdGFbbmFtZV0uY29udGVudEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQpICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbC5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zY3JvbGxUb3AgPSBzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtUGFkLnN0eWxlLmhlaWdodCA9IHRoaXMuZGF0YVtuYW1lXS5lbGVtUGFkSGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5pbml0RXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnQuc2Nyb2xsVG9Qb2ludCgwLCAwLCAwKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5pbml0RXhwYW5kZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbbmFtZV0uaW5pdEV4cGFuZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50LnNjcm9sbFRvUG9pbnQoMCwgMCwgMCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uaW5pdEV4cGFuZGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsZXQgaGVpZ2h0ID0gTWF0aC5tYXgoTWF0aC5taW4odGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCwgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCAtIGUuZGV0YWlsLnNjcm9sbFRvcCksIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsICcgKyAtKE1hdGgubWluKCh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0IC0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCkgLyAyLCBlLmRldGFpbC5zY3JvbGxUb3AgLyAyKSkgKyAncHgsIDApJztcclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtLnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNjcm9sbEZhY3RvciA9IE1hdGgubWluKGUuZGV0YWlsLnNjcm9sbFRvcCAvICh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0IC8gMiksIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHNjcm9sbEZhY3RvciA+PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRWYWxPcGFjaXR5ID0gb3ZlcmxheS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCctLW9wYWNpdHknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1ZhbE9wYWNpdHkgPSB0aGlzLmRhdGFbbmFtZV0ub3BhY2l0eUZhY3RvciAvIDEwICogc2Nyb2xsRmFjdG9yO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJyZW50VmFsT3BhY2l0eSAhPSBuZXdWYWxPcGFjaXR5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxheS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1vcGFjaXR5JywgbmV3VmFsT3BhY2l0eSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50VmFsQmx1ciA9IGVsZW0uc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnLS1ibHVyJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdWYWxCbHVyID0gKHRoaXMuZGF0YVtuYW1lXS5ibHVyRmFjdG9yICogc2Nyb2xsRmFjdG9yKSsncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZihjdXJyZW50VmFsQmx1ciAhPSBuZXdWYWxCbHVyKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1ibHVyJywgbmV3VmFsQmx1cik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC8vZXZlbnQgZW1pdHRlclxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uZ3VhcmRFdmVudHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5sYXN0c2Nyb2xsICE9IGhlaWdodCAmJiAhdGhpcy5kYXRhW25hbWVdLmd1YXJkRXZlbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsLm5leHQoe25hbWU6IHRoaXMuZGF0YVtuYW1lXS5wYXJlbnQgPyB0aGlzLmRhdGFbbmFtZV0ucGFyZW50IDogbmFtZSwgaGVpZ2h0OiBoZWlnaHR9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmxhc3RzY3JvbGwgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy9jYXRjaCB0aGUgbGFzdCB0aWNrXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudC5pb25TY3JvbGxFbmQuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zY3JvbGxUb3AgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnN0eWxlLnBhZGRpbmdUb3AgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbC5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9ICh0aGlzLmRhdGFbbmFtZV0uY29udGVudEhlaWdodCAtIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQpICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWwubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtUGFkLnN0eWxlLmhlaWdodCA9ICh0aGlzLmRhdGFbbmFtZV0uZWxlbVBhZEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgKyB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTApXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJvY2VlZFNocmlua0V4cGFuZFRhYnMobmFtZSkge1xyXG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmRhdGFbbmFtZV0ucGFyZW50O1xyXG4gICAgICAgIGxldCBwYXJlbnRFbGVtID0gdGhpcy5kYXRhW3BhcmVudF0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgICAgICBsZXQgZWxlbSA9IHRoaXMuZGF0YVtwYXJlbnRdLmhlYWRlci5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgIGxldCB0YWJzY29udGVudEVsZW0gPSB0aGlzLmRhdGFbcGFyZW50XS50YWJzY29udGVudEVsZW07XHJcbiAgICAgICAgbGV0IHN1cGVydGFic1Rvb2xiYXI6IGFueSA9IHRhYnNjb250ZW50RWxlbS5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N1cGVyLXRhYnMtdG9vbGJhcicpO1xyXG4gICAgICAgIGxldCBvdmVybGF5ID0gdGhpcy5kYXRhW3BhcmVudF0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheScpO1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGFbbmFtZV0ub3BhY2l0eUNvbG9yKSB7XHJcbiAgICAgICAgICAgIG92ZXJsYXkuc3R5bGUuc2V0UHJvcGVydHkoJy0tY29sb3InLCB0aGlzLmRhdGFbbmFtZV0ub3BhY2l0eUNvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5vcGFjaXR5RmFjdG9yID4gMCkge1xyXG4gICAgICAgICAgICAvL2FuZ3VsYXIgZGVjaWRlcyB0aGF0IG9wYWNpdHkgaXMgYmFkIGFuZCBjaGFuZ2VzIGl0IHRvIGFscGhhIHdoaWNoIGRvZXNuJ3Qgd29yayBsb2xcclxuICAgICAgICAgICAgb3ZlcmxheS5zdHlsZS5zZXRQcm9wZXJ0eSgnZmlsdGVyJywgJ29wYWNpdHkodmFyKC0tb3BhY2l0eSkpJyk7XHJcbiAgICAgICAgICAgIG92ZXJsYXkuc3R5bGUuc2V0UHJvcGVydHkoJy0tb3BhY2l0eScsIHRoaXMuZGF0YVtuYW1lXS5vcGFjaXR5RmFjdG9yIC8gMTApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLmJsdXJGYWN0b3IgPiAwKSB7XHJcbiAgICAgICAgICAgIGVsZW0uc3R5bGUuc2V0UHJvcGVydHkoJ2ZpbHRlcicsICdibHVyKHZhcigtLWJsdXIpKScpO1xyXG4gICAgICAgICAgICBlbGVtLnN0eWxlLnNldFByb3BlcnR5KCctLWJsdXInLCB0aGlzLmRhdGFbbmFtZV0uYmx1ckZhY3RvciAvIDEwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCA9IHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQ7XHJcbiAgICAgICAgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCA9IGVsZW0uc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgIGVsZW0uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsICcgKyAtKCh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0IC0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCkgLyAyKSArICdweCwgMCknO1xyXG4gICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50LmdldFNjcm9sbEVsZW1lbnQoKS50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbSA9IHJlcztcclxuICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLnBhZGRpbmdUb3AgPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0pWydwYWRkaW5nLXRvcCddLCAxMCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zdHlsZS5wYWRkaW5nVG9wID0gKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgKyBzdXBlcnRhYnNUb29sYmFyLmNsaWVudEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wKSArICdweCc7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zdHlsZS5oZWlnaHQgPSAodGhpcy5kYXRhW3BhcmVudF0udGFic2NvbnRlbnRFbGVtLm5hdGl2ZUVsZW1lbnQuY2xpZW50SGVpZ2h0KSArICdweCc7XHJcbiAgICAgICAgICAgIC8vdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnN0eWxlLm1hcmdpblRvcCA9IHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICBsZXQgZWxlbVBhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICBlbGVtUGFkLnN0eWxlLmNzc1RleHQgPSAnYmFja2dyb3VuZDpyZ2JhKDAsMCwwLDApJztcclxuICAgICAgICAgICAgbGV0IHggPSB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc2Nyb2xsSGVpZ2h0ICsgKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KTtcclxuICAgICAgICAgICAgLy9leHBlcmltZW50YWwgaGVpZ2h0XHJcbiAgICAgICAgICAgIGVsZW1QYWQuc3R5bGUuaGVpZ2h0ID0geCArICdweCc7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy9jaGVjayBpZiBoZWlnaHQgaXMgc3RpbGwgb2sgYW5kIGFkanVzdCBpZiBub3RcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5lbGVtUGFkSGVpZ2h0ID0gTWF0aC5tYXgoMCwgKHggLSAodGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnNjcm9sbEhlaWdodCAtIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5vZmZzZXRIZWlnaHQpICsgKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSkpO1xyXG4gICAgICAgICAgICAgICAgZWxlbVBhZC5zdHlsZS5oZWlnaHQgPSB0aGlzLmRhdGFbbmFtZV0uZWxlbVBhZEhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5hcHBlbmRDaGlsZChlbGVtUGFkKTtcclxuICAgICAgICAgICAgbGV0IHNjcm9sbERpc3QgPSB0aGlzLmRhdGFbbmFtZV0uaW5pdEV4cGFuZGVkID8gMiA6ICh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0IC0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50LnNjcm9sbEJ5UG9pbnQoMCwgc2Nyb2xsRGlzdCwgMCkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEhlaWdodCA9IHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWwubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudC5zY3JvbGxFdmVudHMgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnQuaW9uU2Nyb2xsLnN1YnNjcmliZShlID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZS5kZXRhaWwuc2Nyb2xsVG9wID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnN0eWxlLnBhZGRpbmdUb3AgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gKHRoaXMuZGF0YVtuYW1lXS5jb250ZW50SGVpZ2h0IC0gKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgKyBzdXBlcnRhYnNUb29sYmFyLmNsaWVudEhlaWdodCkpICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbC5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9ICh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0ICsgc3VwZXJ0YWJzVG9vbGJhci5jbGllbnRIZWlnaHQgKyB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtUGFkLnN0eWxlLmhlaWdodCA9ICh0aGlzLmRhdGFbbmFtZV0uZWxlbVBhZEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgKyB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCArIHN1cGVydGFic1Rvb2xiYXIuY2xpZW50SGVpZ2h0KSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSBlLmRldGFpbC5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zdHlsZS5wYWRkaW5nVG9wID0gKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgKyBzdXBlcnRhYnNUb29sYmFyLmNsaWVudEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWwubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSAodGhpcy5kYXRhW25hbWVdLmNvbnRlbnRIZWlnaHQgKyB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0ICsgc3VwZXJ0YWJzVG9vbGJhci5jbGllbnRIZWlnaHQpICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbC5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zY3JvbGxUb3AgPSBzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtUGFkLnN0eWxlLmhlaWdodCA9IHRoaXMuZGF0YVtuYW1lXS5lbGVtUGFkSGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5pbml0RXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnQuc2Nyb2xsVG9Qb2ludCgwLCAwLCAwKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5pbml0RXhwYW5kZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSBNYXRoLm1heChNYXRoLm1pbih0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0LCB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0IC0gZS5kZXRhaWwuc2Nyb2xsVG9wKSwgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwgJyArIC0oTWF0aC5taW4oKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSAvIDIsIGUuZGV0YWlsLnNjcm9sbFRvcCAvIDIpKSArICdweCwgMCknO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudEVsZW0uc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2Nyb2xsRmFjdG9yID0gTWF0aC5taW4oZS5kZXRhaWwuc2Nyb2xsVG9wIC8gKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLyAyKSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2Nyb2xsRmFjdG9yID49IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFZhbE9wYWNpdHkgPSBvdmVybGF5LnN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy0tb3BhY2l0eScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VmFsT3BhY2l0eSA9IHRoaXMuZGF0YVtuYW1lXS5vcGFjaXR5RmFjdG9yIC8gMTAgKiBzY3JvbGxGYWN0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRWYWxPcGFjaXR5ICE9IG5ld1ZhbE9wYWNpdHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5LnN0eWxlLnNldFByb3BlcnR5KCctLW9wYWNpdHknLCBuZXdWYWxPcGFjaXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRWYWxCbHVyID0gZWxlbS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJsdXInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1ZhbEJsdXIgPSAodGhpcy5kYXRhW25hbWVdLmJsdXJGYWN0b3IgKiBzY3JvbGxGYWN0b3IpKydweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRWYWxCbHVyICE9IG5ld1ZhbEJsdXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLnNldFByb3BlcnR5KCctLWJsdXInLCBuZXdWYWxCbHVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc3VwZXJ0YWJzVG9vbGJhci5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwgJyArIGhlaWdodCArICdweCwgMCknO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vZXZlbnQgZW1pdHRlclxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uZ3VhcmRFdmVudHMgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9LCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5sYXN0c2Nyb2xsICE9IGhlaWdodCAmJiAhdGhpcy5kYXRhW25hbWVdLmd1YXJkRXZlbnRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2Nyb2xsLm5leHQoe25hbWU6IHRoaXMuZGF0YVtuYW1lXS5wYXJlbnQgPyB0aGlzLmRhdGFbbmFtZV0ucGFyZW50IDogbmFtZSwgaGVpZ2h0OiBoZWlnaHR9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmxhc3RzY3JvbGwgPSBoZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy9jYXRjaCB0aGUgbGFzdCB0aWNrXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudC5pb25TY3JvbGxFbmQuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zY3JvbGxUb3AgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnN0eWxlLnBhZGRpbmdUb3AgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbC5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9ICh0aGlzLmRhdGFbbmFtZV0uY29udGVudEhlaWdodCAtICh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0ICsgc3VwZXJ0YWJzVG9vbGJhci5jbGllbnRIZWlnaHQpKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgKyBzdXBlcnRhYnNUb29sYmFyLmNsaWVudEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtUGFkLnN0eWxlLmhlaWdodCA9ICh0aGlzLmRhdGFbbmFtZV0uZWxlbVBhZEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgKyB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCArIHN1cGVydGFic1Rvb2xiYXIuY2xpZW50SGVpZ2h0KSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCAxMClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICByZXNldENvbnRlbnQobmFtZSkge1xyXG4gICAgICAgIGlmICghdGhpcy5kYXRhW25hbWVdLnByZXNlcnZlSGVhZGVyKSB7XHJcbiAgICAgICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmRhdGFbbmFtZV0ucGFyZW50O1xyXG4gICAgICAgICAgICBsZXQgaGVpZ2h0ID0gcGFyc2VJbnQodGhpcy5kYXRhW3BhcmVudF0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZS5zdHlsZS5oZWlnaHQsIDEwKTtcclxuICAgICAgICAgICAgaWYgKGhlaWdodCA8PSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0ICYmIGhlaWdodCA+IHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQgfHwgaGVpZ2h0ID09IHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQgJiYgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnNjcm9sbFRvcCA8ICh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0IC0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zY3JvbGxUb3AgPSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0IC0gaGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGV0IHBhcmVudCA9IHRoaXMuZGF0YVtuYW1lXS5wYXJlbnQ7XHJcbiAgICAgICAgICAgIGxldCBwYXJlbnRFbGVtID0gdGhpcy5kYXRhW3BhcmVudF0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgICAgICAgICAgbGV0IGVsZW0gPSB0aGlzLmRhdGFbcGFyZW50XS5oZWFkZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICAgICAgbGV0IHRhYnNjb250ZW50RWxlbSA9IHRoaXMuZGF0YVtwYXJlbnRdLnRhYnNjb250ZW50RWxlbTtcclxuICAgICAgICAgICAgbGV0IHN1cGVydGFic1Rvb2xiYXI6IGFueSA9IHRhYnNjb250ZW50RWxlbS5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N1cGVyLXRhYnMtdG9vbGJhcicpO1xyXG4gICAgICAgICAgICBsZXQgb3ZlcmxheSA9IHRoaXMuZGF0YVtwYXJlbnRdLmhlYWRlci5uYXRpdmVFbGVtZW50LnBhcmVudE5vZGUucXVlcnlTZWxlY3RvcignLm92ZXJsYXknKTtcclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IE1hdGgubWF4KE1hdGgubWluKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQsIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc2Nyb2xsVG9wKSwgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCk7XHJcbiAgICAgICAgICAgIGVsZW0uc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsICcgKyAtKE1hdGgubWluKCh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0IC0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCkgLyAyLCB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc2Nyb2xsVG9wIC8gMikpICsgJ3B4LCAwKSc7XHJcbiAgICAgICAgICAgIHBhcmVudEVsZW0uc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgb3ZlcmxheS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1vcGFjaXR5JywgdGhpcy5kYXRhW25hbWVdLm9wYWNpdHlGYWN0b3IgLyAxMCAqIE1hdGgubWluKHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zY3JvbGxUb3AgLyAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCAvIDIpLCAxKSk7XHJcbiAgICAgICAgICAgIGVsZW0uc3R5bGUuc2V0UHJvcGVydHkoJy0tYmx1cicsICh0aGlzLmRhdGFbbmFtZV0uYmx1ckZhY3RvciAqIE1hdGgubWluKHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zY3JvbGxUb3AgLyAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCAvIDIpLCAxKSkgKydweCcpO1xyXG4gICAgICAgICAgICBzdXBlcnRhYnNUb29sYmFyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLCAnICsgaGVpZ2h0ICsgJ3B4LCAwKSc7XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsLm5leHQoe25hbWU6IHRoaXMuZGF0YVtuYW1lXS5wYXJlbnQsIGhlaWdodDogaGVpZ2h0fSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZpbmRDdXJyZW50VGFiKHBhcmVudCkge1xyXG4gICAgICAgIGxldCBpID0gdGhpcy5kYXRhW3BhcmVudF0uc3VwZXJ0YWJzLmFjdGl2ZVRhYkluZGV4O1xyXG4gICAgICAgIGxldCB0YWJzID0gdGhpcy5kYXRhW3BhcmVudF0udGFic2NvbnRlbnRFbGVtLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnc3VwZXItdGFiJyk7XHJcbiAgICAgICAgbGV0IHJlc3VsdHMgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCB0YWIgb2YgdGFicykge1xyXG4gICAgICAgICAgICBsZXQgY29udCA9IHRhYi5xdWVyeVNlbGVjdG9yKCdpb24tY29udGVudCcpO1xyXG4gICAgICAgICAgICBpZiAoY29udC5hdHRyaWJ1dGVzWydoaWRlbmF2LXNoLWNvbnRlbnQnXSlcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChjb250LmF0dHJpYnV0ZXNbJ2hpZGVuYXYtc2gtY29udGVudCddLm5vZGVWYWx1ZSk7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChudWxsKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlc3VsdHNbaV0gIT0gbnVsbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0c1tpXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGV4cGFuZChwYXJlbnQsIGR1cmF0aW9uID0gMjAwKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YVtwYXJlbnRdLmNvbnRlbnQpIHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW3BhcmVudF0uY29udGVudC5zY3JvbGxUb1BvaW50KDAsIDAsIGR1cmF0aW9uKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGF0YVtwYXJlbnRdLnByZXNlcnZlSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmFtZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW2tleV0ucGFyZW50ID09IHBhcmVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBvZiBuYW1lcylcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudC5zY3JvbGxUb1BvaW50KDAsIDAsIGR1cmF0aW9uKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBjdXJyZW50VGFiID0gdGhpcy5maW5kQ3VycmVudFRhYihwYXJlbnQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW2N1cnJlbnRUYWJdLmNvbnRlbnQuc2Nyb2xsVG9Qb2ludCgwLCAwLCBkdXJhdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHNocmluayhwYXJlbnQsIGR1cmF0aW9uID0gMjAwKSB7XHJcbiAgICAgICAgbGV0IGhlaWdodCA9IHBhcnNlSW50KHRoaXMuZGF0YVtwYXJlbnRdLmhlYWRlci5uYXRpdmVFbGVtZW50LnBhcmVudE5vZGUuc3R5bGUuaGVpZ2h0LCAxMCk7XHJcbiAgICAgICAgaWYoaGVpZ2h0ID4gdGhpcy5kYXRhW3BhcmVudF0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KXtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtwYXJlbnRdLmNvbnRlbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtwYXJlbnRdLmNvbnRlbnQuc2Nyb2xsVG9Qb2ludCgwLCAodGhpcy5kYXRhW3BhcmVudF0uc2hyaW5rZXhwYW5kSGVpZ2h0IC0gdGhpcy5kYXRhW3BhcmVudF0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSwgZHVyYXRpb24pO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5kYXRhW3BhcmVudF0ucHJlc2VydmVIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgbmFtZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFba2V5XS5wYXJlbnQgPT0gcGFyZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBuYW1lIG9mIG5hbWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50LnNjcm9sbFRvUG9pbnQoMCwgKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSwgZHVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRUYWIgPSB0aGlzLmZpbmRDdXJyZW50VGFiKHBhcmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW2N1cnJlbnRUYWJdLmNvbnRlbnQuc2Nyb2xsVG9Qb2ludCgwLCAodGhpcy5kYXRhW2N1cnJlbnRUYWJdLnNocmlua2V4cGFuZEhlaWdodCAtIHRoaXMuZGF0YVtjdXJyZW50VGFiXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQpLCBkdXJhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHRvZ2dsZShwYXJlbnQsIGR1cmF0aW9uID0gMjAwKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YVtwYXJlbnRdLmNvbnRlbnQpIHtcclxuICAgICAgICAgICAgbGV0IGhlaWdodCA9IHBhcnNlSW50KHRoaXMuZGF0YVtwYXJlbnRdLmhlYWRlci5uYXRpdmVFbGVtZW50LnBhcmVudE5vZGUuc3R5bGUuaGVpZ2h0LCAxMCk7XHJcbiAgICAgICAgICAgIGlmIChoZWlnaHQgPCB0aGlzLmRhdGFbcGFyZW50XS5zaHJpbmtleHBhbmRIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbcGFyZW50XS5jb250ZW50LnNjcm9sbFRvUG9pbnQoMCwgMCwgZHVyYXRpb24pO1xyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbcGFyZW50XS5jb250ZW50LnNjcm9sbFRvUG9pbnQoMCwgKHRoaXMuZGF0YVtwYXJlbnRdLnNocmlua2V4cGFuZEhlaWdodCAtIHRoaXMuZGF0YVtwYXJlbnRdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCksIGR1cmF0aW9uKTtcclxuXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRhdGFbcGFyZW50XS5wcmVzZXJ2ZUhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgbGV0IG5hbWVzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gdGhpcy5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtrZXldLnBhcmVudCA9PSBwYXJlbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzLnB1c2goa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSBwYXJzZUludCh0aGlzLmRhdGFbcGFyZW50XS5oZWFkZXIubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlLnN0eWxlLmhlaWdodCwgMTApO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbmFtZSBvZiBuYW1lcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWlnaHQgPCB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudC5zY3JvbGxUb1BvaW50KDAsIDAsIGR1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50LnNjcm9sbFRvUG9pbnQoMCwgKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSwgZHVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRUYWIgPSB0aGlzLmZpbmRDdXJyZW50VGFiKHBhcmVudCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgaGVpZ2h0ID0gcGFyc2VJbnQodGhpcy5kYXRhW3BhcmVudF0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZS5zdHlsZS5oZWlnaHQsIDEwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaGVpZ2h0IDwgdGhpcy5kYXRhW2N1cnJlbnRUYWJdLnNocmlua2V4cGFuZEhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbY3VycmVudFRhYl0uY29udGVudC5zY3JvbGxUb1BvaW50KDAsIDAsIGR1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbY3VycmVudFRhYl0uY29udGVudC5zY3JvbGxUb1BvaW50KDAsICh0aGlzLmRhdGFbY3VycmVudFRhYl0uc2hyaW5rZXhwYW5kSGVpZ2h0IC0gdGhpcy5kYXRhW2N1cnJlbnRUYWJdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCksIGR1cmF0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl19