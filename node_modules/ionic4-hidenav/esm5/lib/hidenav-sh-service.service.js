/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import { Subject } from 'rxjs';
import * as i0 from "@angular/core";
var HidenavShService = /** @class */ (function () {
    function HidenavShService() {
        this.data = [];
        this.mode = 'ios';
        this.names = [];
        this.tabnames = [];
        this.scroll = new Subject();
    }
    /**
     * @return {?}
     */
    HidenavShService.prototype.requestName = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var name = 'page' + this.names.length;
        this.names.push(name);
        return name;
    };
    /**
     * @param {?} name
     * @return {?}
     */
    HidenavShService.prototype.requestTabName = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        if (!this.tabnames[name])
            this.tabnames[name] = [];
        /** @type {?} */
        var tabname = name + 'tab' + this.tabnames[name].length;
        this.tabnames[name].push(tabname);
        return tabname;
    };
    /**
     * @param {?} name
     * @return {?}
     */
    HidenavShService.prototype.initiate = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        var e_1, _a;
        /** @type {?} */
        var names = [];
        for (var key in this.data) {
            if (this.data[key].parent == name)
                names.push(key);
        }
        try {
            for (var names_1 = tslib_1.__values(names), names_1_1 = names_1.next(); !names_1_1.done; names_1_1 = names_1.next()) {
                var name_1 = names_1_1.value;
                this.initiate2(name_1);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (names_1_1 && !names_1_1.done && (_a = names_1.return)) _a.call(names_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        if (names.length == 0)
            this.initiate2(name);
    };
    /**
     * @param {?} name
     * @return {?}
     */
    HidenavShService.prototype.initiate2 = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        if (!(this.data[name] && (this.data[name].parent && this.data[this.data[name].parent] && this.data[this.data[name].parent].tabscontent && this.data[name].content && this.data[this.data[name].parent].header) || (!this.data[name].parent && this.data[name].content && this.data[name].header)))
            return false;
        /** @type {?} */
        var parent = this.data[name].parent;
        /** @type {?} */
        var content = this.data[name].content;
        if (this.data[name].lastscroll == null)
            this.data[name].lastscroll = 0;
        if (this.data[name].guardEvents == null)
            this.data[name].guardEvents = true;
        content.scrollEvents = true;
        if (!parent) {
            /** @type {?} */
            var header = this.data[name].header;
            if (this.data[name].static) {
                this.data[name].static.forEach((/**
                 * @param {?} el
                 * @return {?}
                 */
                function (el) {
                    el.nativeElement.style.position = 'absolute';
                    el.nativeElement.style.zIndex = 102;
                }));
            }
            if (header) {
                /** @type {?} */
                var parentElem = header.nativeElement.parentNode;
                /** @type {?} */
                var elem = header.nativeElement;
                if (parentElem.getAttribute('init-expanded') == 'true')
                    this.data[name].initExpanded = true;
                /** @type {?} */
                var notchHeight = parseInt(getComputedStyle(document.documentElement).getPropertyValue("--ion-safe-area-top"), 10);
                this.data[name].shrinkexpandheaderHeight = parseInt(parentElem.getAttribute('header-height'), 10) + notchHeight;
                this.data[name].opacityFactor = parseInt(parentElem.getAttribute('opacity-factor'), 10);
                this.data[name].opacityColor = parentElem.getAttribute('opacity-color');
                this.data[name].blurFactor = parseInt(parentElem.getAttribute('blur-factor'), 10);
                parentElem.style.height = this.data[name].shrinkexpandheaderHeight + 'px';
                parentElem.style.overflow = 'hidden';
                parentElem.style.position = 'absolute';
                elem.style.position = 'absolute';
                parentElem.style.width = '100%';
                elem.style.width = '100%';
                this.waitforelem(name, 'this.data[name].header.nativeElement.scrollHeight', 'proceedShrinkExpand');
            }
        }
        else if (parent) {
            /** @type {?} */
            var header = this.data[parent].header;
            /** @type {?} */
            var tabscontentElem = this.data[parent].tabscontentElem;
            if (this.data[parent].static) {
                this.data[parent].static.forEach((/**
                 * @param {?} el
                 * @return {?}
                 */
                function (el) {
                    el.nativeElement.style.position = 'absolute';
                    el.nativeElement.style.zIndex = 102;
                }));
            }
            if (header) {
                /** @type {?} */
                var supertabsToolbar = tabscontentElem.nativeElement.querySelector('super-tabs-toolbar');
                /** @type {?} */
                var parentElem = header.nativeElement.parentNode;
                /** @type {?} */
                var elem = header.nativeElement;
                if (parentElem.getAttribute('init-expanded') == 'true')
                    this.data[name].initExpanded = true;
                if (parentElem.getAttribute('preserve-header') == 'true') {
                    this.data[name].preserveHeader = true;
                    this.data[parent].preserveHeader = true;
                }
                /** @type {?} */
                var notchHeight = parseInt(getComputedStyle(document.documentElement).getPropertyValue("--ion-safe-area-top"), 10);
                this.data[name].shrinkexpandheaderHeight = parseInt(parentElem.getAttribute('header-height'), 10) + notchHeight;
                this.data[name].opacityFactor = parseInt(parentElem.getAttribute('opacity-factor'), 10);
                this.data[name].opacityColor = elem.getAttribute('opacity-color');
                this.data[name].blurFactor = parseInt(parentElem.getAttribute('blur-factor'), 10);
                parentElem.style.height = this.data[name].shrinkexpandheaderHeight + 'px';
                parentElem.style.overflow = 'hidden';
                parentElem.style.position = 'absolute';
                elem.style.position = 'absolute';
                parentElem.style.width = '100%';
                elem.style.width = '100%';
                supertabsToolbar.style.position = 'absolute';
                supertabsToolbar.style.transform = 'translate3d(0, ' + this.data[name].shrinkexpandheaderHeight + 'px, 0)';
                parentElem.style.zIndex = 101;
                this.waitforelemTabs(name, 'this.data[this.data[name].parent].header.nativeElement.scrollHeight', 'this.data[this.data[name].parent].tabscontentElem.nativeElement.querySelector(\'super-tabs-toolbar\').clientHeight', 'proceedShrinkExpandTabs');
            }
        }
    };
    /**
     * @param {?} name
     * @param {?} evaluate
     * @param {?} func
     * @return {?}
     */
    HidenavShService.prototype.waitforelem = /**
     * @param {?} name
     * @param {?} evaluate
     * @param {?} func
     * @return {?}
     */
    function (name, evaluate, func) {
        /** @type {?} */
        var x = eval(evaluate);
        if (!{ x: x } || x < this.data[name].shrinkexpandheaderHeight) {
            window.requestAnimationFrame(this.waitforelem.bind(this, name, evaluate, func));
        }
        else {
            this[func](name);
        }
    };
    /**
     * @param {?} name
     * @param {?} evaluate
     * @param {?} evaluate2
     * @param {?} func
     * @return {?}
     */
    HidenavShService.prototype.waitforelemTabs = /**
     * @param {?} name
     * @param {?} evaluate
     * @param {?} evaluate2
     * @param {?} func
     * @return {?}
     */
    function (name, evaluate, evaluate2, func) {
        /** @type {?} */
        var x = eval(evaluate);
        /** @type {?} */
        var y = eval(evaluate2);
        if (!{ x: x } || x < this.data[name].shrinkexpandheaderHeight || !{ y: y } || y == 0) {
            window.requestAnimationFrame(this.waitforelemTabs.bind(this, name, evaluate, evaluate2, func));
        }
        else {
            this[func](name);
        }
    };
    /**
     * @param {?} name
     * @return {?}
     */
    HidenavShService.prototype.proceedShrinkExpand = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        var _this = this;
        /** @type {?} */
        var parentElem = this.data[name].header.nativeElement.parentNode;
        /** @type {?} */
        var elem = this.data[name].header.nativeElement;
        /** @type {?} */
        var overlay = this.data[name].header.nativeElement.parentNode.querySelector('.overlay');
        if (this.data[name].opacityColor) {
            overlay.style.setProperty('--color', this.data[name].opacityColor);
        }
        if (this.data[name].opacityFactor > 0) {
            //angular decides that opacity is bad and changes it to alpha which doesn't work lol
            overlay.style.setProperty('filter', 'opacity(var(--opacity))');
            overlay.style.setProperty('--opacity', this.data[name].opacityFactor / 10);
        }
        if (this.data[name].blurFactor > 0) {
            elem.style.setProperty('filter', 'blur(var(--blur))');
            elem.style.setProperty('--blur', this.data[name].blurFactor / 10);
        }
        this.data[name].shrinkexpandHeight = this.data[name].shrinkexpandheaderHeight;
        this.data[name].shrinkexpandHeight = this.data[name].header.nativeElement.scrollHeight;
        elem.style.transform = 'translate3d(0, ' + -((this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight) / 2) + 'px, 0)';
        this.data[name].content.getScrollElement().then((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            _this.data[name].contentElem = res;
            _this.data[name].paddingTop = parseInt(window.getComputedStyle(_this.data[name].contentElem)['padding-top'], 10);
            _this.data[name].contentElem.style.paddingTop = (_this.data[name].shrinkexpandHeight + _this.data[name].paddingTop) + 'px';
            //this.data[name].contentElem.style.marginTop = this.data[name].shrinkexpandheaderHeight + 'px';
            /** @type {?} */
            var elemPad = document.createElement('div');
            elemPad.style.cssText = 'background:rgba(0,0,0,0)';
            /** @type {?} */
            var x = _this.data[name].contentElem.scrollHeight + (_this.data[name].shrinkexpandHeight - _this.data[name].shrinkexpandheaderHeight);
            //experimental height
            elemPad.style.height = x + 'px';
            setTimeout((/**
             * @return {?}
             */
            function () {
                //check if height is still ok and adjust if not
                _this.data[name].elemPadHeight = Math.max(0, (x - (_this.data[name].contentElem.scrollHeight - _this.data[name].contentElem.offsetHeight) + (_this.data[name].shrinkexpandHeight - _this.data[name].shrinkexpandheaderHeight)));
                elemPad.style.height = _this.data[name].elemPadHeight + 'px';
            }), 100);
            _this.data[name].contentElem.appendChild(elemPad);
            /** @type {?} */
            var scrollDist = _this.data[name].initExpanded ? 2 : (_this.data[name].shrinkexpandHeight - _this.data[name].shrinkexpandheaderHeight);
            _this.data[name].content.scrollByPoint(0, scrollDist, 0).then((/**
             * @return {?}
             */
            function () {
                _this.data[name].contentHeight = _this.data[name].contentEl.nativeElement.clientHeight;
                _this.data[name].content.scrollEvents = true;
                _this.data[name].content.ionScroll.subscribe((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) {
                    if (e.detail.scrollTop == 0) {
                        _this.data[name].contentElem.style.paddingTop = 0;
                        _this.data[name].contentEl.nativeElement.style.height = (_this.data[name].contentHeight - _this.data[name].shrinkexpandHeight) + 'px';
                        _this.data[name].contentEl.nativeElement.style.top = (_this.data[name].shrinkexpandHeight + _this.data[name].paddingTop) + 'px';
                        elemPad.style.height = (_this.data[name].elemPadHeight + _this.data[name].shrinkexpandHeight + _this.data[name].paddingTop) + 'px';
                    }
                    else {
                        /** @type {?} */
                        var s = e.detail.scrollTop;
                        _this.data[name].contentElem.style.paddingTop = (_this.data[name].shrinkexpandHeight + _this.data[name].paddingTop) + 'px';
                        _this.data[name].contentEl.nativeElement.style.height = (_this.data[name].contentHeight + _this.data[name].shrinkexpandHeight) + 'px';
                        _this.data[name].contentEl.nativeElement.style.top = null;
                        _this.data[name].contentElem.scrollTop = s;
                        elemPad.style.height = _this.data[name].elemPadHeight + 'px';
                    }
                    if (_this.data[name].initExpanded) {
                        _this.data[name].content.scrollToPoint(0, 0, 0).then((/**
                         * @return {?}
                         */
                        function () {
                            _this.data[name].initExpanded = false;
                        }));
                    }
                    if (_this.data[name].initExpanded) {
                        _this.data[name].content.scrollToPoint(0, 0, 0).then((/**
                         * @return {?}
                         */
                        function () {
                            _this.data[name].initExpanded = false;
                        }));
                    }
                    /** @type {?} */
                    var height = Math.max(Math.min(_this.data[name].shrinkexpandHeight, _this.data[name].shrinkexpandHeight - e.detail.scrollTop), _this.data[name].shrinkexpandheaderHeight);
                    elem.style.transform = 'translate3d(0, ' + -(Math.min((_this.data[name].shrinkexpandHeight - _this.data[name].shrinkexpandheaderHeight) / 2, e.detail.scrollTop / 2)) + 'px, 0)';
                    parentElem.style.height = height + 'px';
                    /** @type {?} */
                    var scrollFactor = Math.min(e.detail.scrollTop / (_this.data[name].shrinkexpandHeight / 2), 1);
                    if (scrollFactor >= 0) {
                        /** @type {?} */
                        var currentValOpacity = overlay.style.getPropertyValue('--opacity');
                        /** @type {?} */
                        var newValOpacity = _this.data[name].opacityFactor / 10 * scrollFactor;
                        if (currentValOpacity != newValOpacity)
                            overlay.style.setProperty('--opacity', newValOpacity);
                        /** @type {?} */
                        var currentValBlur = elem.style.getPropertyValue('--blur');
                        /** @type {?} */
                        var newValBlur = (_this.data[name].blurFactor * scrollFactor) + 'px';
                        if (currentValBlur != newValBlur)
                            elem.style.setProperty('--blur', newValBlur);
                    }
                    //event emitter
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.data[name].guardEvents = false;
                    }), 10);
                    if (_this.data[name].lastscroll != height && !_this.data[name].guardEvents) {
                        _this.scroll.next({ name: _this.data[name].parent ? _this.data[name].parent : name, height: height });
                    }
                    _this.data[name].lastscroll = height;
                    //
                }));
                //catch the last tick
                _this.data[name].content.ionScrollEnd.subscribe((/**
                 * @return {?}
                 */
                function () {
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        if (_this.data[name].contentElem.scrollTop == 0) {
                            _this.data[name].contentElem.style.paddingTop = 0;
                            _this.data[name].contentEl.nativeElement.style.height = (_this.data[name].contentHeight - _this.data[name].shrinkexpandHeight) + 'px';
                            _this.data[name].contentEl.nativeElement.style.top = (_this.data[name].shrinkexpandHeight + _this.data[name].paddingTop) + 'px';
                            elemPad.style.height = (_this.data[name].elemPadHeight + _this.data[name].shrinkexpandHeight + _this.data[name].paddingTop) + 'px';
                        }
                    }), 10);
                }));
            }));
        }));
    };
    /**
     * @param {?} name
     * @return {?}
     */
    HidenavShService.prototype.proceedShrinkExpandTabs = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        var _this = this;
        /** @type {?} */
        var parent = this.data[name].parent;
        /** @type {?} */
        var parentElem = this.data[parent].header.nativeElement.parentNode;
        /** @type {?} */
        var elem = this.data[parent].header.nativeElement;
        /** @type {?} */
        var tabscontentElem = this.data[parent].tabscontentElem;
        /** @type {?} */
        var supertabsToolbar = tabscontentElem.nativeElement.querySelector('super-tabs-toolbar');
        /** @type {?} */
        var overlay = this.data[parent].header.nativeElement.parentNode.querySelector('.overlay');
        if (this.data[name].opacityColor) {
            overlay.style.setProperty('--color', this.data[name].opacityColor);
        }
        if (this.data[name].opacityFactor > 0) {
            //angular decides that opacity is bad and changes it to alpha which doesn't work lol
            overlay.style.setProperty('filter', 'opacity(var(--opacity))');
            overlay.style.setProperty('--opacity', this.data[name].opacityFactor / 10);
        }
        if (this.data[name].blurFactor > 0) {
            elem.style.setProperty('filter', 'blur(var(--blur))');
            elem.style.setProperty('--blur', this.data[name].blurFactor / 10);
        }
        this.data[name].shrinkexpandHeight = this.data[name].shrinkexpandheaderHeight;
        this.data[name].shrinkexpandHeight = elem.scrollHeight;
        elem.style.transform = 'translate3d(0, ' + -((this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight) / 2) + 'px, 0)';
        this.data[name].content.getScrollElement().then((/**
         * @param {?} res
         * @return {?}
         */
        function (res) {
            _this.data[name].contentElem = res;
            _this.data[name].paddingTop = parseInt(window.getComputedStyle(_this.data[name].contentElem)['padding-top'], 10);
            _this.data[name].contentElem.style.paddingTop = (_this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight + _this.data[name].paddingTop) + 'px';
            _this.data[name].contentElem.style.height = (_this.data[parent].tabscontentElem.nativeElement.clientHeight) + 'px';
            //this.data[name].contentElem.style.marginTop = this.data[name].shrinkexpandheaderHeight + 'px';
            /** @type {?} */
            var elemPad = document.createElement('div');
            elemPad.style.cssText = 'background:rgba(0,0,0,0)';
            /** @type {?} */
            var x = _this.data[name].contentElem.scrollHeight + (_this.data[name].shrinkexpandHeight - _this.data[name].shrinkexpandheaderHeight);
            //experimental height
            elemPad.style.height = x + 'px';
            setTimeout((/**
             * @return {?}
             */
            function () {
                //check if height is still ok and adjust if not
                _this.data[name].elemPadHeight = Math.max(0, (x - (_this.data[name].contentElem.scrollHeight - _this.data[name].contentElem.offsetHeight) + (_this.data[name].shrinkexpandHeight - _this.data[name].shrinkexpandheaderHeight)));
                elemPad.style.height = _this.data[name].elemPadHeight + 'px';
            }), 100);
            _this.data[name].contentElem.appendChild(elemPad);
            /** @type {?} */
            var scrollDist = _this.data[name].initExpanded ? 2 : (_this.data[name].shrinkexpandHeight - _this.data[name].shrinkexpandheaderHeight);
            _this.data[name].content.scrollByPoint(0, scrollDist, 0).then((/**
             * @return {?}
             */
            function () {
                _this.data[name].contentHeight = _this.data[name].contentEl.nativeElement.clientHeight;
                _this.data[name].content.scrollEvents = true;
                _this.data[name].content.ionScroll.subscribe((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) {
                    if (e.detail.scrollTop == 0) {
                        _this.data[name].contentElem.style.paddingTop = 0;
                        _this.data[name].contentEl.nativeElement.style.height = (_this.data[name].contentHeight - (_this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight)) + 'px';
                        _this.data[name].contentEl.nativeElement.style.top = (_this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight + _this.data[name].paddingTop) + 'px';
                        elemPad.style.height = (_this.data[name].elemPadHeight + _this.data[name].shrinkexpandHeight + _this.data[name].paddingTop + supertabsToolbar.clientHeight) + 'px';
                    }
                    else {
                        /** @type {?} */
                        var s = e.detail.scrollTop;
                        _this.data[name].contentElem.style.paddingTop = (_this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight + _this.data[name].paddingTop) + 'px';
                        _this.data[name].contentEl.nativeElement.style.height = (_this.data[name].contentHeight + _this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight) + 'px';
                        _this.data[name].contentEl.nativeElement.style.top = null;
                        _this.data[name].contentElem.scrollTop = s;
                        elemPad.style.height = _this.data[name].elemPadHeight + 'px';
                    }
                    if (_this.data[name].initExpanded) {
                        _this.data[name].content.scrollToPoint(0, 0, 0).then((/**
                         * @return {?}
                         */
                        function () {
                            _this.data[name].initExpanded = false;
                        }));
                    }
                    /** @type {?} */
                    var height = Math.max(Math.min(_this.data[name].shrinkexpandHeight, _this.data[name].shrinkexpandHeight - e.detail.scrollTop), _this.data[name].shrinkexpandheaderHeight);
                    elem.style.transform = 'translate3d(0, ' + -(Math.min((_this.data[name].shrinkexpandHeight - _this.data[name].shrinkexpandheaderHeight) / 2, e.detail.scrollTop / 2)) + 'px, 0)';
                    parentElem.style.height = height + 'px';
                    /** @type {?} */
                    var scrollFactor = Math.min(e.detail.scrollTop / (_this.data[name].shrinkexpandHeight / 2), 1);
                    if (scrollFactor >= 0) {
                        /** @type {?} */
                        var currentValOpacity = overlay.style.getPropertyValue('--opacity');
                        /** @type {?} */
                        var newValOpacity = _this.data[name].opacityFactor / 10 * scrollFactor;
                        if (currentValOpacity != newValOpacity)
                            overlay.style.setProperty('--opacity', newValOpacity);
                        /** @type {?} */
                        var currentValBlur = elem.style.getPropertyValue('--blur');
                        /** @type {?} */
                        var newValBlur = (_this.data[name].blurFactor * scrollFactor) + 'px';
                        if (currentValBlur != newValBlur)
                            elem.style.setProperty('--blur', newValBlur);
                    }
                    supertabsToolbar.style.transform = 'translate3d(0, ' + height + 'px, 0)';
                    //event emitter
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        _this.data[name].guardEvents = false;
                    }), 10);
                    if (_this.data[name].lastscroll != height && !_this.data[name].guardEvents) {
                        _this.scroll.next({ name: _this.data[name].parent ? _this.data[name].parent : name, height: height });
                    }
                    _this.data[name].lastscroll = height;
                    //
                }));
                //catch the last tick
                _this.data[name].content.ionScrollEnd.subscribe((/**
                 * @return {?}
                 */
                function () {
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        if (_this.data[name].contentElem.scrollTop == 0) {
                            _this.data[name].contentElem.style.paddingTop = 0;
                            _this.data[name].contentEl.nativeElement.style.height = (_this.data[name].contentHeight - (_this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight)) + 'px';
                            _this.data[name].contentEl.nativeElement.style.top = (_this.data[name].shrinkexpandHeight + supertabsToolbar.clientHeight + _this.data[name].paddingTop) + 'px';
                            elemPad.style.height = (_this.data[name].elemPadHeight + _this.data[name].shrinkexpandHeight + _this.data[name].paddingTop + supertabsToolbar.clientHeight) + 'px';
                        }
                    }), 10);
                }));
            }));
        }));
    };
    /**
     * @param {?} name
     * @return {?}
     */
    HidenavShService.prototype.resetContent = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        if (!this.data[name].preserveHeader) {
            /** @type {?} */
            var parent_1 = this.data[name].parent;
            /** @type {?} */
            var height = parseInt(this.data[parent_1].header.nativeElement.parentNode.style.height, 10);
            if (height <= this.data[name].shrinkexpandHeight && height > this.data[name].shrinkexpandheaderHeight || height == this.data[name].shrinkexpandheaderHeight && this.data[name].contentElem.scrollTop < (this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight)) {
                this.data[name].contentElem.scrollTop = this.data[name].shrinkexpandHeight - height;
            }
        }
        else {
            /** @type {?} */
            var parent_2 = this.data[name].parent;
            /** @type {?} */
            var parentElem = this.data[parent_2].header.nativeElement.parentNode;
            /** @type {?} */
            var elem = this.data[parent_2].header.nativeElement;
            /** @type {?} */
            var tabscontentElem = this.data[parent_2].tabscontentElem;
            /** @type {?} */
            var supertabsToolbar = tabscontentElem.nativeElement.querySelector('super-tabs-toolbar');
            /** @type {?} */
            var overlay = this.data[parent_2].header.nativeElement.parentNode.querySelector('.overlay');
            /** @type {?} */
            var height = Math.max(Math.min(this.data[name].shrinkexpandHeight, this.data[name].shrinkexpandHeight - this.data[name].contentElem.scrollTop), this.data[name].shrinkexpandheaderHeight);
            elem.style.transform = 'translate3d(0, ' + -(Math.min((this.data[name].shrinkexpandHeight - this.data[name].shrinkexpandheaderHeight) / 2, this.data[name].contentElem.scrollTop / 2)) + 'px, 0)';
            parentElem.style.height = height + 'px';
            overlay.style.setProperty('--opacity', this.data[name].opacityFactor / 10 * Math.min(this.data[name].contentElem.scrollTop / (this.data[name].shrinkexpandHeight / 2), 1));
            elem.style.setProperty('--blur', (this.data[name].blurFactor * Math.min(this.data[name].contentElem.scrollTop / (this.data[name].shrinkexpandHeight / 2), 1)) + 'px');
            supertabsToolbar.style.transform = 'translate3d(0, ' + height + 'px, 0)';
            this.scroll.next({ name: this.data[name].parent, height: height });
        }
    };
    /**
     * @param {?} parent
     * @return {?}
     */
    HidenavShService.prototype.findCurrentTab = /**
     * @param {?} parent
     * @return {?}
     */
    function (parent) {
        var e_2, _a;
        /** @type {?} */
        var i = this.data[parent].supertabs.activeTabIndex;
        /** @type {?} */
        var tabs = this.data[parent].tabscontentElem.nativeElement.querySelectorAll('super-tab');
        /** @type {?} */
        var results = [];
        try {
            for (var tabs_1 = tslib_1.__values(tabs), tabs_1_1 = tabs_1.next(); !tabs_1_1.done; tabs_1_1 = tabs_1.next()) {
                var tab = tabs_1_1.value;
                /** @type {?} */
                var cont = tab.querySelector('ion-content');
                if (cont.attributes['hidenav-sh-content'])
                    results.push(cont.attributes['hidenav-sh-content'].nodeValue);
                else
                    results.push(null);
            }
        }
        catch (e_2_1) { e_2 = { error: e_2_1 }; }
        finally {
            try {
                if (tabs_1_1 && !tabs_1_1.done && (_a = tabs_1.return)) _a.call(tabs_1);
            }
            finally { if (e_2) throw e_2.error; }
        }
        if (results[i] != null) {
            return results[i];
        }
        return null;
    };
    /**
     * @param {?} parent
     * @param {?=} duration
     * @return {?}
     */
    HidenavShService.prototype.expand = /**
     * @param {?} parent
     * @param {?=} duration
     * @return {?}
     */
    function (parent, duration) {
        if (duration === void 0) { duration = 200; }
        var e_3, _a;
        if (this.data[parent].content) {
            this.data[parent].content.scrollToPoint(0, 0, duration);
        }
        else {
            if (!this.data[parent].preserveHeader) {
                /** @type {?} */
                var names = [];
                for (var key in this.data) {
                    if (this.data[key].parent == parent)
                        names.push(key);
                }
                try {
                    for (var names_2 = tslib_1.__values(names), names_2_1 = names_2.next(); !names_2_1.done; names_2_1 = names_2.next()) {
                        var name_2 = names_2_1.value;
                        this.data[name_2].content.scrollToPoint(0, 0, duration);
                    }
                }
                catch (e_3_1) { e_3 = { error: e_3_1 }; }
                finally {
                    try {
                        if (names_2_1 && !names_2_1.done && (_a = names_2.return)) _a.call(names_2);
                    }
                    finally { if (e_3) throw e_3.error; }
                }
            }
            else {
                /** @type {?} */
                var currentTab = this.findCurrentTab(parent);
                this.data[currentTab].content.scrollToPoint(0, 0, duration);
            }
        }
    };
    /**
     * @param {?} parent
     * @param {?=} duration
     * @return {?}
     */
    HidenavShService.prototype.shrink = /**
     * @param {?} parent
     * @param {?=} duration
     * @return {?}
     */
    function (parent, duration) {
        if (duration === void 0) { duration = 200; }
        var e_4, _a;
        /** @type {?} */
        var height = parseInt(this.data[parent].header.nativeElement.parentNode.style.height, 10);
        if (height > this.data[parent].shrinkexpandheaderHeight) {
            if (this.data[parent].content) {
                this.data[parent].content.scrollToPoint(0, (this.data[parent].shrinkexpandHeight - this.data[parent].shrinkexpandheaderHeight), duration);
            }
            else {
                if (!this.data[parent].preserveHeader) {
                    /** @type {?} */
                    var names = [];
                    for (var key in this.data) {
                        if (this.data[key].parent == parent)
                            names.push(key);
                    }
                    try {
                        for (var names_3 = tslib_1.__values(names), names_3_1 = names_3.next(); !names_3_1.done; names_3_1 = names_3.next()) {
                            var name_3 = names_3_1.value;
                            this.data[name_3].content.scrollToPoint(0, (this.data[name_3].shrinkexpandHeight - this.data[name_3].shrinkexpandheaderHeight), duration);
                        }
                    }
                    catch (e_4_1) { e_4 = { error: e_4_1 }; }
                    finally {
                        try {
                            if (names_3_1 && !names_3_1.done && (_a = names_3.return)) _a.call(names_3);
                        }
                        finally { if (e_4) throw e_4.error; }
                    }
                }
                else {
                    /** @type {?} */
                    var currentTab = this.findCurrentTab(parent);
                    this.data[currentTab].content.scrollToPoint(0, (this.data[currentTab].shrinkexpandHeight - this.data[currentTab].shrinkexpandheaderHeight), duration);
                }
            }
        }
    };
    /**
     * @param {?} parent
     * @param {?=} duration
     * @return {?}
     */
    HidenavShService.prototype.toggle = /**
     * @param {?} parent
     * @param {?=} duration
     * @return {?}
     */
    function (parent, duration) {
        if (duration === void 0) { duration = 200; }
        var e_5, _a;
        if (this.data[parent].content) {
            /** @type {?} */
            var height = parseInt(this.data[parent].header.nativeElement.parentNode.style.height, 10);
            if (height < this.data[parent].shrinkexpandHeight)
                this.data[parent].content.scrollToPoint(0, 0, duration);
            else
                this.data[parent].content.scrollToPoint(0, (this.data[parent].shrinkexpandHeight - this.data[parent].shrinkexpandheaderHeight), duration);
        }
        else {
            if (!this.data[parent].preserveHeader) {
                /** @type {?} */
                var names = [];
                for (var key in this.data) {
                    if (this.data[key].parent == parent)
                        names.push(key);
                }
                /** @type {?} */
                var height = parseInt(this.data[parent].header.nativeElement.parentNode.style.height, 10);
                try {
                    for (var names_4 = tslib_1.__values(names), names_4_1 = names_4.next(); !names_4_1.done; names_4_1 = names_4.next()) {
                        var name_4 = names_4_1.value;
                        if (height < this.data[name_4].shrinkexpandHeight)
                            this.data[name_4].content.scrollToPoint(0, 0, duration);
                        else
                            this.data[name_4].content.scrollToPoint(0, (this.data[name_4].shrinkexpandHeight - this.data[name_4].shrinkexpandheaderHeight), duration);
                    }
                }
                catch (e_5_1) { e_5 = { error: e_5_1 }; }
                finally {
                    try {
                        if (names_4_1 && !names_4_1.done && (_a = names_4.return)) _a.call(names_4);
                    }
                    finally { if (e_5) throw e_5.error; }
                }
            }
            else {
                /** @type {?} */
                var currentTab = this.findCurrentTab(parent);
                /** @type {?} */
                var height = parseInt(this.data[parent].header.nativeElement.parentNode.style.height, 10);
                if (height < this.data[currentTab].shrinkexpandHeight)
                    this.data[currentTab].content.scrollToPoint(0, 0, duration);
                else
                    this.data[currentTab].content.scrollToPoint(0, (this.data[currentTab].shrinkexpandHeight - this.data[currentTab].shrinkexpandheaderHeight), duration);
            }
        }
    };
    HidenavShService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    HidenavShService.ctorParameters = function () { return []; };
    /** @nocollapse */ HidenavShService.ngInjectableDef = i0.defineInjectable({ factory: function HidenavShService_Factory() { return new HidenavShService(); }, token: HidenavShService, providedIn: "root" });
    return HidenavShService;
}());
export { HidenavShService };
if (false) {
    /** @type {?} */
    HidenavShService.prototype.data;
    /** @type {?} */
    HidenavShService.prototype.mode;
    /** @type {?} */
    HidenavShService.prototype.names;
    /** @type {?} */
    HidenavShService.prototype.tabnames;
    /** @type {?} */
    HidenavShService.prototype.scroll;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlkZW5hdi1zaC1zZXJ2aWNlLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9pb25pYzQtaGlkZW5hdi8iLCJzb3VyY2VzIjpbImxpYi9oaWRlbmF2LXNoLXNlcnZpY2Uuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxlQUFlLENBQUM7QUFDekMsT0FBTyxFQUFDLE9BQU8sRUFBQyxNQUFNLE1BQU0sQ0FBQzs7QUFFN0I7SUF5Qkk7UUFwQkEsU0FBSSxHQUFHLEVBQUUsQ0FBQztRQUNWLFNBQUksR0FBUSxLQUFLLENBQUM7UUFDbEIsVUFBSyxHQUFHLEVBQUUsQ0FBQztRQUNYLGFBQVEsR0FBRyxFQUFFLENBQUM7UUFrQlYsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLE9BQU8sRUFBRSxDQUFDO0lBQ2hDLENBQUM7Ozs7SUFoQkQsc0NBQVc7OztJQUFYOztZQUNRLElBQUksR0FBRyxNQUFNLEdBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNO1FBQ25DLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RCLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7Ozs7O0lBRUQseUNBQWM7Ozs7SUFBZCxVQUFlLElBQUk7UUFDZixJQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUM7WUFDbkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7O1lBQ3pCLE9BQU8sR0FBRyxJQUFJLEdBQUMsS0FBSyxHQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTTtRQUNuRCxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNsQyxPQUFPLE9BQU8sQ0FBQztJQUNuQixDQUFDOzs7OztJQU1ELG1DQUFROzs7O0lBQVIs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QUMsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQztnQkFFekYsSUFBSSxNQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxrQkFBa0I7b0JBQ2pELElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDOztvQkFFNUQsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLENBQUMsRUFBRSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyx3QkFBd0IsQ0FBQyxFQUFFLFFBQVEsQ0FBQyxDQUFDO2FBRTdKO1NBQ0o7SUFDTCxDQUFDOztnQkF6Y0osVUFBVSxTQUFDO29CQUNSLFVBQVUsRUFBRSxNQUFNO2lCQUNyQjs7OzsyQkFMRDtDQTZjQyxBQTFjRCxJQTBjQztTQXZjWSxnQkFBZ0I7OztJQUV6QixnQ0FBVTs7SUFDVixnQ0FBa0I7O0lBQ2xCLGlDQUFXOztJQUNYLG9DQUFjOztJQUNkLGtDQUFZIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJbmplY3RhYmxlfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHtTdWJqZWN0fSBmcm9tICdyeGpzJztcclxuXHJcbkBJbmplY3RhYmxlKHtcclxuICAgIHByb3ZpZGVkSW46ICdyb290J1xyXG59KVxyXG5leHBvcnQgY2xhc3MgSGlkZW5hdlNoU2VydmljZSB7XHJcblxyXG4gICAgZGF0YSA9IFtdO1xyXG4gICAgbW9kZTogYW55ID0gJ2lvcyc7XHJcbiAgICBuYW1lcyA9IFtdO1xyXG4gICAgdGFibmFtZXMgPSBbXTtcclxuICAgIHNjcm9sbDogYW55O1xyXG5cclxuICAgIHJlcXVlc3ROYW1lKCl7XHJcbiAgICAgICAgbGV0IG5hbWUgPSAncGFnZScrdGhpcy5uYW1lcy5sZW5ndGg7XHJcbiAgICAgICAgdGhpcy5uYW1lcy5wdXNoKG5hbWUpO1xyXG4gICAgICAgIHJldHVybiBuYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcXVlc3RUYWJOYW1lKG5hbWUpe1xyXG4gICAgICAgIGlmKCF0aGlzLnRhYm5hbWVzW25hbWVdKVxyXG4gICAgICAgICAgICB0aGlzLnRhYm5hbWVzW25hbWVdID0gW107XHJcbiAgICAgICAgbGV0IHRhYm5hbWUgPSBuYW1lKyd0YWInK3RoaXMudGFibmFtZXNbbmFtZV0ubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMudGFibmFtZXNbbmFtZV0ucHVzaCh0YWJuYW1lKTtcclxuICAgICAgICByZXR1cm4gdGFibmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICB0aGlzLnNjcm9sbCA9IG5ldyBTdWJqZWN0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhdGUobmFtZSkge1xyXG4gICAgICAgIGxldCBuYW1lcyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmRhdGEpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtrZXldLnBhcmVudCA9PSBuYW1lKVxyXG4gICAgICAgICAgICAgICAgbmFtZXMucHVzaChrZXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGxldCBuYW1lIG9mIG5hbWVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdGUyKG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobmFtZXMubGVuZ3RoID09IDApXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhdGUyKG5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIGluaXRpYXRlMihuYW1lKSB7XHJcbiAgICAgICAgaWYgKCEodGhpcy5kYXRhW25hbWVdICYmICh0aGlzLmRhdGFbbmFtZV0ucGFyZW50ICYmIHRoaXMuZGF0YVt0aGlzLmRhdGFbbmFtZV0ucGFyZW50XSAmJiB0aGlzLmRhdGFbdGhpcy5kYXRhW25hbWVdLnBhcmVudF0udGFic2NvbnRlbnQgJiYgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnQgJiYgdGhpcy5kYXRhW3RoaXMuZGF0YVtuYW1lXS5wYXJlbnRdLmhlYWRlcikgfHwgKCF0aGlzLmRhdGFbbmFtZV0ucGFyZW50ICYmIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50ICYmIHRoaXMuZGF0YVtuYW1lXS5oZWFkZXIpKSlcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGxldCBwYXJlbnQgPSB0aGlzLmRhdGFbbmFtZV0ucGFyZW50O1xyXG4gICAgICAgIGxldCBjb250ZW50ID0gdGhpcy5kYXRhW25hbWVdLmNvbnRlbnQ7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5sYXN0c2Nyb2xsID09IG51bGwpXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5sYXN0c2Nyb2xsID0gMDtcclxuICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLmd1YXJkRXZlbnRzID09IG51bGwpXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5ndWFyZEV2ZW50cyA9IHRydWU7XHJcbiAgICAgICAgY29udGVudC5zY3JvbGxFdmVudHMgPSB0cnVlO1xyXG4gICAgICAgIGlmICghcGFyZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBoZWFkZXIgPSB0aGlzLmRhdGFbbmFtZV0uaGVhZGVyO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLnN0YXRpYykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLnN0YXRpYy5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBlbC5uYXRpdmVFbGVtZW50LnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICAgICAgICAgICAgICBlbC5uYXRpdmVFbGVtZW50LnN0eWxlLnpJbmRleCA9IDEwMjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoaGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFyZW50RWxlbSA9IGhlYWRlci5uYXRpdmVFbGVtZW50LnBhcmVudE5vZGU7XHJcbiAgICAgICAgICAgICAgICBsZXQgZWxlbSA9IGhlYWRlci5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudEVsZW0uZ2V0QXR0cmlidXRlKCdpbml0LWV4cGFuZGVkJykgPT0gJ3RydWUnKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5pbml0RXhwYW5kZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgbGV0IG5vdGNoSGVpZ2h0ID0gcGFyc2VJbnQoZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpLmdldFByb3BlcnR5VmFsdWUoXCItLWlvbi1zYWZlLWFyZWEtdG9wXCIpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0ID0gcGFyc2VJbnQocGFyZW50RWxlbS5nZXRBdHRyaWJ1dGUoJ2hlYWRlci1oZWlnaHQnKSwgMTApK25vdGNoSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLm9wYWNpdHlGYWN0b3IgPSBwYXJzZUludChwYXJlbnRFbGVtLmdldEF0dHJpYnV0ZSgnb3BhY2l0eS1mYWN0b3InKSwgMTApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLm9wYWNpdHlDb2xvciA9IHBhcmVudEVsZW0uZ2V0QXR0cmlidXRlKCdvcGFjaXR5LWNvbG9yJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uYmx1ckZhY3RvciA9IHBhcnNlSW50KHBhcmVudEVsZW0uZ2V0QXR0cmlidXRlKCdibHVyLWZhY3RvcicpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRFbGVtLnN0eWxlLmhlaWdodCA9IHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbS5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICAgICAgICAgIHBhcmVudEVsZW0uc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgICAgICAgICAgdGhpcy53YWl0Zm9yZWxlbShuYW1lLCAndGhpcy5kYXRhW25hbWVdLmhlYWRlci5uYXRpdmVFbGVtZW50LnNjcm9sbEhlaWdodCcsICdwcm9jZWVkU2hyaW5rRXhwYW5kJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2UgaWYgKHBhcmVudCkge1xyXG4gICAgICAgICAgICBsZXQgaGVhZGVyID0gdGhpcy5kYXRhW3BhcmVudF0uaGVhZGVyO1xyXG4gICAgICAgICAgICBsZXQgdGFic2NvbnRlbnRFbGVtID0gdGhpcy5kYXRhW3BhcmVudF0udGFic2NvbnRlbnRFbGVtO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhW3BhcmVudF0uc3RhdGljKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbcGFyZW50XS5zdGF0aWMuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwubmF0aXZlRWxlbWVudC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgZWwubmF0aXZlRWxlbWVudC5zdHlsZS56SW5kZXggPSAxMDI7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN1cGVydGFic1Rvb2xiYXI6IGFueSA9IHRhYnNjb250ZW50RWxlbS5uYXRpdmVFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3N1cGVyLXRhYnMtdG9vbGJhcicpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHBhcmVudEVsZW0gPSBoZWFkZXIubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICAgICAgbGV0IGVsZW0gPSBoZWFkZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRFbGVtLmdldEF0dHJpYnV0ZSgnaW5pdC1leHBhbmRlZCcpID09ICd0cnVlJylcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uaW5pdEV4cGFuZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJlbnRFbGVtLmdldEF0dHJpYnV0ZSgncHJlc2VydmUtaGVhZGVyJykgPT0gJ3RydWUnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLnByZXNlcnZlSGVhZGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbcGFyZW50XS5wcmVzZXJ2ZUhlYWRlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgbm90Y2hIZWlnaHQgPSBwYXJzZUludChnZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuZ2V0UHJvcGVydHlWYWx1ZShcIi0taW9uLXNhZmUtYXJlYS10b3BcIiksIDEwKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQgPSBwYXJzZUludChwYXJlbnRFbGVtLmdldEF0dHJpYnV0ZSgnaGVhZGVyLWhlaWdodCcpLCAxMCkrbm90Y2hIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0ub3BhY2l0eUZhY3RvciA9IHBhcnNlSW50KHBhcmVudEVsZW0uZ2V0QXR0cmlidXRlKCdvcGFjaXR5LWZhY3RvcicpLCAxMCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0ub3BhY2l0eUNvbG9yID0gZWxlbS5nZXRBdHRyaWJ1dGUoJ29wYWNpdHktY29sb3InKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5ibHVyRmFjdG9yID0gcGFyc2VJbnQocGFyZW50RWxlbS5nZXRBdHRyaWJ1dGUoJ2JsdXItZmFjdG9yJyksIDEwKTtcclxuICAgICAgICAgICAgICAgIHBhcmVudEVsZW0uc3R5bGUuaGVpZ2h0ID0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRFbGVtLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRFbGVtLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICAgICAgICAgICAgcGFyZW50RWxlbS5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgICAgICAgICBzdXBlcnRhYnNUb29sYmFyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICAgICAgICAgIHN1cGVydGFic1Rvb2xiYXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsICcgKyB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0ICsgJ3B4LCAwKSc7XHJcbiAgICAgICAgICAgICAgICBwYXJlbnRFbGVtLnN0eWxlLnpJbmRleCA9IDEwMTtcclxuICAgICAgICAgICAgICAgIHRoaXMud2FpdGZvcmVsZW1UYWJzKG5hbWUsICd0aGlzLmRhdGFbdGhpcy5kYXRhW25hbWVdLnBhcmVudF0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQuc2Nyb2xsSGVpZ2h0JywgJ3RoaXMuZGF0YVt0aGlzLmRhdGFbbmFtZV0ucGFyZW50XS50YWJzY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxcJ3N1cGVyLXRhYnMtdG9vbGJhclxcJykuY2xpZW50SGVpZ2h0JywgJ3Byb2NlZWRTaHJpbmtFeHBhbmRUYWJzJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgd2FpdGZvcmVsZW0obmFtZSwgZXZhbHVhdGUsIGZ1bmMpIHtcclxuICAgICAgICBsZXQgeCA9IGV2YWwoZXZhbHVhdGUpO1xyXG4gICAgICAgIGlmICghe3h9IHx8IHggPCB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy53YWl0Zm9yZWxlbS5iaW5kKHRoaXMsIG5hbWUsIGV2YWx1YXRlLCBmdW5jKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpc1tmdW5jXShuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgd2FpdGZvcmVsZW1UYWJzKG5hbWUsIGV2YWx1YXRlLCBldmFsdWF0ZTIsIGZ1bmMpIHtcclxuICAgICAgICBsZXQgeCA9IGV2YWwoZXZhbHVhdGUpO1xyXG4gICAgICAgIGxldCB5ID0gZXZhbChldmFsdWF0ZTIpO1xyXG4gICAgICAgIGlmICghe3h9IHx8IHggPCB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0IHx8ICF7eX0gfHwgeSA9PSAwKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy53YWl0Zm9yZWxlbVRhYnMuYmluZCh0aGlzLCBuYW1lLCBldmFsdWF0ZSwgZXZhbHVhdGUyLCBmdW5jKSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpc1tmdW5jXShuYW1lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJvY2VlZFNocmlua0V4cGFuZChuYW1lKSB7XHJcbiAgICAgICAgbGV0IHBhcmVudEVsZW0gPSB0aGlzLmRhdGFbbmFtZV0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZTtcclxuICAgICAgICBsZXQgZWxlbSA9IHRoaXMuZGF0YVtuYW1lXS5oZWFkZXIubmF0aXZlRWxlbWVudDtcclxuICAgICAgICBsZXQgb3ZlcmxheSA9IHRoaXMuZGF0YVtuYW1lXS5oZWFkZXIubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5vcGFjaXR5Q29sb3IpIHtcclxuICAgICAgICAgICAgb3ZlcmxheS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jb2xvcicsIHRoaXMuZGF0YVtuYW1lXS5vcGFjaXR5Q29sb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLm9wYWNpdHlGYWN0b3IgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vYW5ndWxhciBkZWNpZGVzIHRoYXQgb3BhY2l0eSBpcyBiYWQgYW5kIGNoYW5nZXMgaXQgdG8gYWxwaGEgd2hpY2ggZG9lc24ndCB3b3JrIGxvbFxyXG4gICAgICAgICAgICBvdmVybGF5LnN0eWxlLnNldFByb3BlcnR5KCdmaWx0ZXInLCAnb3BhY2l0eSh2YXIoLS1vcGFjaXR5KSknKTtcclxuICAgICAgICAgICAgb3ZlcmxheS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1vcGFjaXR5JywgdGhpcy5kYXRhW25hbWVdLm9wYWNpdHlGYWN0b3IgLyAxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRhdGFbbmFtZV0uYmx1ckZhY3RvciA+IDApIHtcclxuICAgICAgICAgICAgZWxlbS5zdHlsZS5zZXRQcm9wZXJ0eSgnZmlsdGVyJywgJ2JsdXIodmFyKC0tYmx1cikpJyk7XHJcbiAgICAgICAgICAgIGVsZW0uc3R5bGUuc2V0UHJvcGVydHkoJy0tYmx1cicsIHRoaXMuZGF0YVtuYW1lXS5ibHVyRmFjdG9yIC8gMTApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0ID0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodDtcclxuICAgICAgICB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0ID0gdGhpcy5kYXRhW25hbWVdLmhlYWRlci5uYXRpdmVFbGVtZW50LnNjcm9sbEhlaWdodDtcclxuICAgICAgICBlbGVtLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLCAnICsgLSgodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCAtIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQpIC8gMikgKyAncHgsIDApJztcclxuICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudC5nZXRTY3JvbGxFbGVtZW50KCkudGhlbihyZXMgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0gPSByZXM7XHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtKVsncGFkZGluZy10b3AnXSwgMTApO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc3R5bGUucGFkZGluZ1RvcCA9ICh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0ICsgdGhpcy5kYXRhW25hbWVdLnBhZGRpbmdUb3ApICsgJ3B4JztcclxuICAgICAgICAgICAgLy90aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc3R5bGUubWFyZ2luVG9wID0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgIGxldCBlbGVtUGFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGVsZW1QYWQuc3R5bGUuY3NzVGV4dCA9ICdiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMCknO1xyXG4gICAgICAgICAgICBsZXQgeCA9IHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zY3JvbGxIZWlnaHQgKyAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCAtIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQpO1xyXG4gICAgICAgICAgICAvL2V4cGVyaW1lbnRhbCBoZWlnaHRcclxuICAgICAgICAgICAgZWxlbVBhZC5zdHlsZS5oZWlnaHQgPSB4ICsgJ3B4JztcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvL2NoZWNrIGlmIGhlaWdodCBpcyBzdGlsbCBvayBhbmQgYWRqdXN0IGlmIG5vdFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmVsZW1QYWRIZWlnaHQgPSBNYXRoLm1heCgwLCAoeCAtICh0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc2Nyb2xsSGVpZ2h0IC0gdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLm9mZnNldEhlaWdodCkgKyAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCAtIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQpKSk7XHJcbiAgICAgICAgICAgICAgICBlbGVtUGFkLnN0eWxlLmhlaWdodCA9IHRoaXMuZGF0YVtuYW1lXS5lbGVtUGFkSGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLmFwcGVuZENoaWxkKGVsZW1QYWQpO1xyXG4gICAgICAgICAgICBsZXQgc2Nyb2xsRGlzdCA9IHRoaXMuZGF0YVtuYW1lXS5pbml0RXhwYW5kZWQgPyAyIDogKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnQuc2Nyb2xsQnlQb2ludCgwLCBzY3JvbGxEaXN0LCAwKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50SGVpZ2h0ID0gdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbC5uYXRpdmVFbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50LnNjcm9sbEV2ZW50cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudC5pb25TY3JvbGwuc3Vic2NyaWJlKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmRldGFpbC5zY3JvbGxUb3AgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc3R5bGUucGFkZGluZ1RvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWwubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSAodGhpcy5kYXRhW25hbWVdLmNvbnRlbnRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0KSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWwubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1QYWQuc3R5bGUuaGVpZ2h0ID0gKHRoaXMuZGF0YVtuYW1lXS5lbGVtUGFkSGVpZ2h0ICsgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHMgPSBlLmRldGFpbC5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zdHlsZS5wYWRkaW5nVG9wID0gKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgKyB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gKHRoaXMuZGF0YVtuYW1lXS5jb250ZW50SGVpZ2h0ICsgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnNjcm9sbFRvcCA9IHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1QYWQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5kYXRhW25hbWVdLmVsZW1QYWRIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLmluaXRFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudC5zY3JvbGxUb1BvaW50KDAsIDAsIDApLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmluaXRFeHBhbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5pbml0RXhwYW5kZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnQuc2Nyb2xsVG9Qb2ludCgwLCAwLCAwKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5pbml0RXhwYW5kZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSBNYXRoLm1heChNYXRoLm1pbih0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0LCB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0IC0gZS5kZXRhaWwuc2Nyb2xsVG9wKSwgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwgJyArIC0oTWF0aC5taW4oKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSAvIDIsIGUuZGV0YWlsLnNjcm9sbFRvcCAvIDIpKSArICdweCwgMCknO1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmVudEVsZW0uc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc2Nyb2xsRmFjdG9yID0gTWF0aC5taW4oZS5kZXRhaWwuc2Nyb2xsVG9wIC8gKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLyAyKSwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoc2Nyb2xsRmFjdG9yID49IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFZhbE9wYWNpdHkgPSBvdmVybGF5LnN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy0tb3BhY2l0eScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VmFsT3BhY2l0eSA9IHRoaXMuZGF0YVtuYW1lXS5vcGFjaXR5RmFjdG9yIC8gMTAgKiBzY3JvbGxGYWN0b3I7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRWYWxPcGFjaXR5ICE9IG5ld1ZhbE9wYWNpdHkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdmVybGF5LnN0eWxlLnNldFByb3BlcnR5KCctLW9wYWNpdHknLCBuZXdWYWxPcGFjaXR5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRWYWxCbHVyID0gZWxlbS5zdHlsZS5nZXRQcm9wZXJ0eVZhbHVlKCctLWJsdXInKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5ld1ZhbEJsdXIgPSAodGhpcy5kYXRhW25hbWVdLmJsdXJGYWN0b3IgKiBzY3JvbGxGYWN0b3IpKydweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRWYWxCbHVyICE9IG5ld1ZhbEJsdXIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLnNldFByb3BlcnR5KCctLWJsdXInLCBuZXdWYWxCbHVyKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLy9ldmVudCBlbWl0dGVyXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5ndWFyZEV2ZW50cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLmxhc3RzY3JvbGwgIT0gaGVpZ2h0ICYmICF0aGlzLmRhdGFbbmFtZV0uZ3VhcmRFdmVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGwubmV4dCh7bmFtZTogdGhpcy5kYXRhW25hbWVdLnBhcmVudCA/IHRoaXMuZGF0YVtuYW1lXS5wYXJlbnQgOiBuYW1lLCBoZWlnaHQ6IGhlaWdodH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0ubGFzdHNjcm9sbCA9IGhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvL2NhdGNoIHRoZSBsYXN0IHRpY2tcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50LmlvblNjcm9sbEVuZC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnNjcm9sbFRvcCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc3R5bGUucGFkZGluZ1RvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gKHRoaXMuZGF0YVtuYW1lXS5jb250ZW50SGVpZ2h0IC0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbC5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9ICh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0ICsgdGhpcy5kYXRhW25hbWVdLnBhZGRpbmdUb3ApICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1QYWQuc3R5bGUuaGVpZ2h0ID0gKHRoaXMuZGF0YVtuYW1lXS5lbGVtUGFkSGVpZ2h0ICsgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCAxMClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcm9jZWVkU2hyaW5rRXhwYW5kVGFicyhuYW1lKSB7XHJcbiAgICAgICAgbGV0IHBhcmVudCA9IHRoaXMuZGF0YVtuYW1lXS5wYXJlbnQ7XHJcbiAgICAgICAgbGV0IHBhcmVudEVsZW0gPSB0aGlzLmRhdGFbcGFyZW50XS5oZWFkZXIubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlO1xyXG4gICAgICAgIGxldCBlbGVtID0gdGhpcy5kYXRhW3BhcmVudF0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQ7XHJcbiAgICAgICAgbGV0IHRhYnNjb250ZW50RWxlbSA9IHRoaXMuZGF0YVtwYXJlbnRdLnRhYnNjb250ZW50RWxlbTtcclxuICAgICAgICBsZXQgc3VwZXJ0YWJzVG9vbGJhcjogYW55ID0gdGFic2NvbnRlbnRFbGVtLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3Rvcignc3VwZXItdGFicy10b29sYmFyJyk7XHJcbiAgICAgICAgbGV0IG92ZXJsYXkgPSB0aGlzLmRhdGFbcGFyZW50XS5oZWFkZXIubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlLnF1ZXJ5U2VsZWN0b3IoJy5vdmVybGF5Jyk7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5vcGFjaXR5Q29sb3IpIHtcclxuICAgICAgICAgICAgb3ZlcmxheS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1jb2xvcicsIHRoaXMuZGF0YVtuYW1lXS5vcGFjaXR5Q29sb3IpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLm9wYWNpdHlGYWN0b3IgPiAwKSB7XHJcbiAgICAgICAgICAgIC8vYW5ndWxhciBkZWNpZGVzIHRoYXQgb3BhY2l0eSBpcyBiYWQgYW5kIGNoYW5nZXMgaXQgdG8gYWxwaGEgd2hpY2ggZG9lc24ndCB3b3JrIGxvbFxyXG4gICAgICAgICAgICBvdmVybGF5LnN0eWxlLnNldFByb3BlcnR5KCdmaWx0ZXInLCAnb3BhY2l0eSh2YXIoLS1vcGFjaXR5KSknKTtcclxuICAgICAgICAgICAgb3ZlcmxheS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1vcGFjaXR5JywgdGhpcy5kYXRhW25hbWVdLm9wYWNpdHlGYWN0b3IgLyAxMCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmRhdGFbbmFtZV0uYmx1ckZhY3RvciA+IDApIHtcclxuICAgICAgICAgICAgZWxlbS5zdHlsZS5zZXRQcm9wZXJ0eSgnZmlsdGVyJywgJ2JsdXIodmFyKC0tYmx1cikpJyk7XHJcbiAgICAgICAgICAgIGVsZW0uc3R5bGUuc2V0UHJvcGVydHkoJy0tYmx1cicsIHRoaXMuZGF0YVtuYW1lXS5ibHVyRmFjdG9yIC8gMTApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0ID0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodDtcclxuICAgICAgICB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0ID0gZWxlbS5zY3JvbGxIZWlnaHQ7XHJcbiAgICAgICAgZWxlbS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwgJyArIC0oKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSAvIDIpICsgJ3B4LCAwKSc7XHJcbiAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnQuZ2V0U2Nyb2xsRWxlbWVudCgpLnRoZW4ocmVzID0+IHtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtID0gcmVzO1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCA9IHBhcnNlSW50KHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbSlbJ3BhZGRpbmctdG9wJ10sIDEwKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnN0eWxlLnBhZGRpbmdUb3AgPSAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCArIHN1cGVydGFic1Rvb2xiYXIuY2xpZW50SGVpZ2h0ICsgdGhpcy5kYXRhW25hbWVdLnBhZGRpbmdUb3ApICsgJ3B4JztcclxuICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnN0eWxlLmhlaWdodCA9ICh0aGlzLmRhdGFbcGFyZW50XS50YWJzY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5jbGllbnRIZWlnaHQpICsgJ3B4JztcclxuICAgICAgICAgICAgLy90aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc3R5bGUubWFyZ2luVG9wID0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgIGxldCBlbGVtUGFkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGVsZW1QYWQuc3R5bGUuY3NzVGV4dCA9ICdiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsMCknO1xyXG4gICAgICAgICAgICBsZXQgeCA9IHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zY3JvbGxIZWlnaHQgKyAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCAtIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQpO1xyXG4gICAgICAgICAgICAvL2V4cGVyaW1lbnRhbCBoZWlnaHRcclxuICAgICAgICAgICAgZWxlbVBhZC5zdHlsZS5oZWlnaHQgPSB4ICsgJ3B4JztcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvL2NoZWNrIGlmIGhlaWdodCBpcyBzdGlsbCBvayBhbmQgYWRqdXN0IGlmIG5vdFxyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmVsZW1QYWRIZWlnaHQgPSBNYXRoLm1heCgwLCAoeCAtICh0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc2Nyb2xsSGVpZ2h0IC0gdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLm9mZnNldEhlaWdodCkgKyAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCAtIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQpKSk7XHJcbiAgICAgICAgICAgICAgICBlbGVtUGFkLnN0eWxlLmhlaWdodCA9IHRoaXMuZGF0YVtuYW1lXS5lbGVtUGFkSGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLmFwcGVuZENoaWxkKGVsZW1QYWQpO1xyXG4gICAgICAgICAgICBsZXQgc2Nyb2xsRGlzdCA9IHRoaXMuZGF0YVtuYW1lXS5pbml0RXhwYW5kZWQgPyAyIDogKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KTtcclxuICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnQuc2Nyb2xsQnlQb2ludCgwLCBzY3JvbGxEaXN0LCAwKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50SGVpZ2h0ID0gdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbC5uYXRpdmVFbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50LnNjcm9sbEV2ZW50cyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudC5pb25TY3JvbGwuc3Vic2NyaWJlKGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmRldGFpbC5zY3JvbGxUb3AgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc3R5bGUucGFkZGluZ1RvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWwubmF0aXZlRWxlbWVudC5zdHlsZS5oZWlnaHQgPSAodGhpcy5kYXRhW25hbWVdLmNvbnRlbnRIZWlnaHQgLSAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCArIHN1cGVydGFic1Rvb2xiYXIuY2xpZW50SGVpZ2h0KSkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgKyBzdXBlcnRhYnNUb29sYmFyLmNsaWVudEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wKSArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1QYWQuc3R5bGUuaGVpZ2h0ID0gKHRoaXMuZGF0YVtuYW1lXS5lbGVtUGFkSGVpZ2h0ICsgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wICsgc3VwZXJ0YWJzVG9vbGJhci5jbGllbnRIZWlnaHQpICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcyA9IGUuZGV0YWlsLnNjcm9sbFRvcDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnN0eWxlLnBhZGRpbmdUb3AgPSAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCArIHN1cGVydGFic1Rvb2xiYXIuY2xpZW50SGVpZ2h0ICsgdGhpcy5kYXRhW25hbWVdLnBhZGRpbmdUb3ApICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbC5uYXRpdmVFbGVtZW50LnN0eWxlLmhlaWdodCA9ICh0aGlzLmRhdGFbbmFtZV0uY29udGVudEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgKyBzdXBlcnRhYnNUb29sYmFyLmNsaWVudEhlaWdodCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnNjcm9sbFRvcCA9IHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1QYWQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5kYXRhW25hbWVdLmVsZW1QYWRIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLmluaXRFeHBhbmRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudC5zY3JvbGxUb1BvaW50KDAsIDAsIDApLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmluaXRFeHBhbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGhlaWdodCA9IE1hdGgubWF4KE1hdGgubWluKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQsIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSBlLmRldGFpbC5zY3JvbGxUb3ApLCB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KTtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLCAnICsgLShNYXRoLm1pbigodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCAtIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQpIC8gMiwgZS5kZXRhaWwuc2Nyb2xsVG9wIC8gMikpICsgJ3B4LCAwKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBzY3JvbGxGYWN0b3IgPSBNYXRoLm1pbihlLmRldGFpbC5zY3JvbGxUb3AgLyAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCAvIDIpLCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBpZihzY3JvbGxGYWN0b3IgPj0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBjdXJyZW50VmFsT3BhY2l0eSA9IG92ZXJsYXkuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZSgnLS1vcGFjaXR5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBuZXdWYWxPcGFjaXR5ID0gdGhpcy5kYXRhW25hbWVdLm9wYWNpdHlGYWN0b3IgLyAxMCAqIHNjcm9sbEZhY3RvcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3VycmVudFZhbE9wYWNpdHkgIT0gbmV3VmFsT3BhY2l0eSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJsYXkuc3R5bGUuc2V0UHJvcGVydHkoJy0tb3BhY2l0eScsIG5ld1ZhbE9wYWNpdHkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFZhbEJsdXIgPSBlbGVtLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoJy0tYmx1cicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmV3VmFsQmx1ciA9ICh0aGlzLmRhdGFbbmFtZV0uYmx1ckZhY3RvciAqIHNjcm9sbEZhY3RvcikrJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoY3VycmVudFZhbEJsdXIgIT0gbmV3VmFsQmx1cilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW0uc3R5bGUuc2V0UHJvcGVydHkoJy0tYmx1cicsIG5ld1ZhbEJsdXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzdXBlcnRhYnNUb29sYmFyLnN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUzZCgwLCAnICsgaGVpZ2h0ICsgJ3B4LCAwKSc7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9ldmVudCBlbWl0dGVyXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5ndWFyZEV2ZW50cyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLmxhc3RzY3JvbGwgIT0gaGVpZ2h0ICYmICF0aGlzLmRhdGFbbmFtZV0uZ3VhcmRFdmVudHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zY3JvbGwubmV4dCh7bmFtZTogdGhpcy5kYXRhW25hbWVdLnBhcmVudCA/IHRoaXMuZGF0YVtuYW1lXS5wYXJlbnQgOiBuYW1lLCBoZWlnaHQ6IGhlaWdodH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0ubGFzdHNjcm9sbCA9IGhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAvL2NhdGNoIHRoZSBsYXN0IHRpY2tcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50LmlvblNjcm9sbEVuZC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnNjcm9sbFRvcCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc3R5bGUucGFkZGluZ1RvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsLm5hdGl2ZUVsZW1lbnQuc3R5bGUuaGVpZ2h0ID0gKHRoaXMuZGF0YVtuYW1lXS5jb250ZW50SGVpZ2h0IC0gKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgKyBzdXBlcnRhYnNUb29sYmFyLmNsaWVudEhlaWdodCkpICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWwubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCArIHN1cGVydGFic1Rvb2xiYXIuY2xpZW50SGVpZ2h0ICsgdGhpcy5kYXRhW25hbWVdLnBhZGRpbmdUb3ApICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1QYWQuc3R5bGUuaGVpZ2h0ID0gKHRoaXMuZGF0YVtuYW1lXS5lbGVtUGFkSGVpZ2h0ICsgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCArIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wICsgc3VwZXJ0YWJzVG9vbGJhci5jbGllbnRIZWlnaHQpICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJlc2V0Q29udGVudChuYW1lKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmRhdGFbbmFtZV0ucHJlc2VydmVIZWFkZXIpIHtcclxuICAgICAgICAgICAgbGV0IHBhcmVudCA9IHRoaXMuZGF0YVtuYW1lXS5wYXJlbnQ7XHJcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSBwYXJzZUludCh0aGlzLmRhdGFbcGFyZW50XS5oZWFkZXIubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlLnN0eWxlLmhlaWdodCwgMTApO1xyXG4gICAgICAgICAgICBpZiAoaGVpZ2h0IDw9IHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgJiYgaGVpZ2h0ID4gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCB8fCBoZWlnaHQgPT0gdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCAmJiB0aGlzLmRhdGFbbmFtZV0uY29udGVudEVsZW0uc2Nyb2xsVG9wIDwgKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnNjcm9sbFRvcCA9IHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSBoZWlnaHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZXQgcGFyZW50ID0gdGhpcy5kYXRhW25hbWVdLnBhcmVudDtcclxuICAgICAgICAgICAgbGV0IHBhcmVudEVsZW0gPSB0aGlzLmRhdGFbcGFyZW50XS5oZWFkZXIubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICBsZXQgZWxlbSA9IHRoaXMuZGF0YVtwYXJlbnRdLmhlYWRlci5uYXRpdmVFbGVtZW50O1xyXG4gICAgICAgICAgICBsZXQgdGFic2NvbnRlbnRFbGVtID0gdGhpcy5kYXRhW3BhcmVudF0udGFic2NvbnRlbnRFbGVtO1xyXG4gICAgICAgICAgICBsZXQgc3VwZXJ0YWJzVG9vbGJhcjogYW55ID0gdGFic2NvbnRlbnRFbGVtLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3Rvcignc3VwZXItdGFicy10b29sYmFyJyk7XHJcbiAgICAgICAgICAgIGxldCBvdmVybGF5ID0gdGhpcy5kYXRhW3BhcmVudF0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZS5xdWVyeVNlbGVjdG9yKCcub3ZlcmxheScpO1xyXG4gICAgICAgICAgICBsZXQgaGVpZ2h0ID0gTWF0aC5tYXgoTWF0aC5taW4odGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCwgdGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCAtIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zY3JvbGxUb3ApLCB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KTtcclxuICAgICAgICAgICAgZWxlbS5zdHlsZS50cmFuc2Zvcm0gPSAndHJhbnNsYXRlM2QoMCwgJyArIC0oTWF0aC5taW4oKHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSAvIDIsIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbS5zY3JvbGxUb3AgLyAyKSkgKyAncHgsIDApJztcclxuICAgICAgICAgICAgcGFyZW50RWxlbS5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICBvdmVybGF5LnN0eWxlLnNldFByb3BlcnR5KCctLW9wYWNpdHknLCB0aGlzLmRhdGFbbmFtZV0ub3BhY2l0eUZhY3RvciAvIDEwICogTWF0aC5taW4odGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnNjcm9sbFRvcCAvICh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0IC8gMiksIDEpKTtcclxuICAgICAgICAgICAgZWxlbS5zdHlsZS5zZXRQcm9wZXJ0eSgnLS1ibHVyJywgKHRoaXMuZGF0YVtuYW1lXS5ibHVyRmFjdG9yICogTWF0aC5taW4odGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLnNjcm9sbFRvcCAvICh0aGlzLmRhdGFbbmFtZV0uc2hyaW5rZXhwYW5kSGVpZ2h0IC8gMiksIDEpKSArJ3B4Jyk7XHJcbiAgICAgICAgICAgIHN1cGVydGFic1Rvb2xiYXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsICcgKyBoZWlnaHQgKyAncHgsIDApJztcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGwubmV4dCh7bmFtZTogdGhpcy5kYXRhW25hbWVdLnBhcmVudCwgaGVpZ2h0OiBoZWlnaHR9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZmluZEN1cnJlbnRUYWIocGFyZW50KSB7XHJcbiAgICAgICAgbGV0IGkgPSB0aGlzLmRhdGFbcGFyZW50XS5zdXBlcnRhYnMuYWN0aXZlVGFiSW5kZXg7XHJcbiAgICAgICAgbGV0IHRhYnMgPSB0aGlzLmRhdGFbcGFyZW50XS50YWJzY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCdzdXBlci10YWInKTtcclxuICAgICAgICBsZXQgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IHRhYiBvZiB0YWJzKSB7XHJcbiAgICAgICAgICAgIGxldCBjb250ID0gdGFiLnF1ZXJ5U2VsZWN0b3IoJ2lvbi1jb250ZW50Jyk7XHJcbiAgICAgICAgICAgIGlmIChjb250LmF0dHJpYnV0ZXNbJ2hpZGVuYXYtc2gtY29udGVudCddKVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGNvbnQuYXR0cmlidXRlc1snaGlkZW5hdi1zaC1jb250ZW50J10ubm9kZVZhbHVlKTtcclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocmVzdWx0c1tpXSAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzW2ldO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZXhwYW5kKHBhcmVudCwgZHVyYXRpb24gPSAyMDApIHtcclxuICAgICAgICBpZiAodGhpcy5kYXRhW3BhcmVudF0uY29udGVudCkge1xyXG4gICAgICAgICAgICB0aGlzLmRhdGFbcGFyZW50XS5jb250ZW50LnNjcm9sbFRvUG9pbnQoMCwgMCwgZHVyYXRpb24pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5kYXRhW3BhcmVudF0ucHJlc2VydmVIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGxldCBuYW1lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMuZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFba2V5XS5wYXJlbnQgPT0gcGFyZW50KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lcy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuYW1lIG9mIG5hbWVzKVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50LnNjcm9sbFRvUG9pbnQoMCwgMCwgZHVyYXRpb24pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRUYWIgPSB0aGlzLmZpbmRDdXJyZW50VGFiKHBhcmVudCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbY3VycmVudFRhYl0uY29udGVudC5zY3JvbGxUb1BvaW50KDAsIDAsIGR1cmF0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgc2hyaW5rKHBhcmVudCwgZHVyYXRpb24gPSAyMDApIHtcclxuICAgICAgICBsZXQgaGVpZ2h0ID0gcGFyc2VJbnQodGhpcy5kYXRhW3BhcmVudF0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZS5zdHlsZS5oZWlnaHQsIDEwKTtcclxuICAgICAgICBpZihoZWlnaHQgPiB0aGlzLmRhdGFbcGFyZW50XS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQpe1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhW3BhcmVudF0uY29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW3BhcmVudF0uY29udGVudC5zY3JvbGxUb1BvaW50KDAsICh0aGlzLmRhdGFbcGFyZW50XS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbcGFyZW50XS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQpLCBkdXJhdGlvbik7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLmRhdGFbcGFyZW50XS5wcmVzZXJ2ZUhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBuYW1lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZGF0YVtrZXldLnBhcmVudCA9PSBwYXJlbnQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lcy5wdXNoKGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IG5hbWUgb2YgbmFtZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnQuc2Nyb2xsVG9Qb2ludCgwLCAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCAtIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQpLCBkdXJhdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgY3VycmVudFRhYiA9IHRoaXMuZmluZEN1cnJlbnRUYWIocGFyZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbY3VycmVudFRhYl0uY29udGVudC5zY3JvbGxUb1BvaW50KDAsICh0aGlzLmRhdGFbY3VycmVudFRhYl0uc2hyaW5rZXhwYW5kSGVpZ2h0IC0gdGhpcy5kYXRhW2N1cnJlbnRUYWJdLnNocmlua2V4cGFuZGhlYWRlckhlaWdodCksIGR1cmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdG9nZ2xlKHBhcmVudCwgZHVyYXRpb24gPSAyMDApIHtcclxuICAgICAgICBpZiAodGhpcy5kYXRhW3BhcmVudF0uY29udGVudCkge1xyXG4gICAgICAgICAgICBsZXQgaGVpZ2h0ID0gcGFyc2VJbnQodGhpcy5kYXRhW3BhcmVudF0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQucGFyZW50Tm9kZS5zdHlsZS5oZWlnaHQsIDEwKTtcclxuICAgICAgICAgICAgaWYgKGhlaWdodCA8IHRoaXMuZGF0YVtwYXJlbnRdLnNocmlua2V4cGFuZEhlaWdodClcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtwYXJlbnRdLmNvbnRlbnQuc2Nyb2xsVG9Qb2ludCgwLCAwLCBkdXJhdGlvbik7XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtwYXJlbnRdLmNvbnRlbnQuc2Nyb2xsVG9Qb2ludCgwLCAodGhpcy5kYXRhW3BhcmVudF0uc2hyaW5rZXhwYW5kSGVpZ2h0IC0gdGhpcy5kYXRhW3BhcmVudF0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSwgZHVyYXRpb24pO1xyXG5cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGF0YVtwYXJlbnRdLnByZXNlcnZlSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbmFtZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAobGV0IGtleSBpbiB0aGlzLmRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW2tleV0ucGFyZW50ID09IHBhcmVudClcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGhlaWdodCA9IHBhcnNlSW50KHRoaXMuZGF0YVtwYXJlbnRdLmhlYWRlci5uYXRpdmVFbGVtZW50LnBhcmVudE5vZGUuc3R5bGUuaGVpZ2h0LCAxMCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuYW1lIG9mIG5hbWVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlaWdodCA8IHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRIZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50LnNjcm9sbFRvUG9pbnQoMCwgMCwgZHVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmNvbnRlbnQuc2Nyb2xsVG9Qb2ludCgwLCAodGhpcy5kYXRhW25hbWVdLnNocmlua2V4cGFuZEhlaWdodCAtIHRoaXMuZGF0YVtuYW1lXS5zaHJpbmtleHBhbmRoZWFkZXJIZWlnaHQpLCBkdXJhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudFRhYiA9IHRoaXMuZmluZEN1cnJlbnRUYWIocGFyZW50KTtcclxuICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSBwYXJzZUludCh0aGlzLmRhdGFbcGFyZW50XS5oZWFkZXIubmF0aXZlRWxlbWVudC5wYXJlbnROb2RlLnN0eWxlLmhlaWdodCwgMTApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChoZWlnaHQgPCB0aGlzLmRhdGFbY3VycmVudFRhYl0uc2hyaW5rZXhwYW5kSGVpZ2h0KVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtjdXJyZW50VGFiXS5jb250ZW50LnNjcm9sbFRvUG9pbnQoMCwgMCwgZHVyYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtjdXJyZW50VGFiXS5jb250ZW50LnNjcm9sbFRvUG9pbnQoMCwgKHRoaXMuZGF0YVtjdXJyZW50VGFiXS5zaHJpbmtleHBhbmRIZWlnaHQgLSB0aGlzLmRhdGFbY3VycmVudFRhYl0uc2hyaW5rZXhwYW5kaGVhZGVySGVpZ2h0KSwgZHVyYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXX0=