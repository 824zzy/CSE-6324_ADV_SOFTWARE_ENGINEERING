/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes,extraRequire,missingOverride,missingReturn,unusedPrivateMembers,uselessCode} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable } from '@angular/core';
import * as i0 from "@angular/core";
var HidenavService = /** @class */ (function () {
    function HidenavService() {
        this.data = [];
        this.names = [];
        this.tabnames = [];
    }
    /**
     * @return {?}
     */
    HidenavService.prototype.requestName = /**
     * @return {?}
     */
    function () {
        /** @type {?} */
        var name = 'page' + this.names.length;
        this.names.push(name);
        return name;
    };
    /**
     * @param {?} name
     * @return {?}
     */
    HidenavService.prototype.requestTabName = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        if (!this.tabnames[name])
            this.tabnames[name] = [];
        /** @type {?} */
        var tabname = name + 'tab' + this.tabnames[name].length;
        this.tabnames[name].push(tabname);
        return tabname;
    };
    /**
     * @param {?} name
     * @return {?}
     */
    HidenavService.prototype.initiate = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        var e_1, _a;
        /** @type {?} */
        var names = [];
        for (var key in this.data) {
            if (this.data[key].parent == name)
                names.push(key);
        }
        try {
            for (var names_1 = tslib_1.__values(names), names_1_1 = names_1.next(); !names_1_1.done; names_1_1 = names_1.next()) {
                var name_1 = names_1_1.value;
                this.initiate2(name_1);
            }
        }
        catch (e_1_1) { e_1 = { error: e_1_1 }; }
        finally {
            try {
                if (names_1_1 && !names_1_1.done && (_a = names_1.return)) _a.call(names_1);
            }
            finally { if (e_1) throw e_1.error; }
        }
        if (names.length == 0)
            this.initiate2(name);
    };
    /**
     * @param {?} name
     * @return {?}
     */
    HidenavService.prototype.initiate2 = /**
     * @param {?} name
     * @return {?}
     */
    function (name) {
        var _this = this;
        if (!(this.data[name] && (this.data[name].parent && this.data[this.data[name].parent].tabscontent && this.data[name].content && this.data[this.data[name].parent].header) || (!this.data[name].parent && this.data[name].content && this.data[name].header)))
            return false;
        /** @type {?} */
        var parent = this.data[name].parent;
        /** @type {?} */
        var content = this.data[name].content;
        /** @type {?} */
        var contentElem = this.data[name].contentElem;
        if (this.data[name].scrollTop == null)
            this.data[name].scrollTop = 0;
        if (this.data[name].lastscroll == null)
            this.data[name].lastscroll = 0;
        if (this.data[name].direction == null)
            this.data[name].direction = '';
        if (this.data[name].tapping == null)
            this.data[name].tapping = false;
        content.scrollEvents = true;
        if (!parent) {
            /** @type {?} */
            var header_1 = this.data[name].header;
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.data[name].navheight = _this.data[name].header.nativeElement.offsetHeight;
                /** @type {?} */
                var scrollContent = contentElem.nativeElement.shadowRoot.querySelector('.inner-scroll');
                _this.data[name].paddingTop = parseInt(window.getComputedStyle(scrollContent)['padding-top'], 10);
                content.ionScroll.subscribe((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) {
                    if (e.detail.scrollTop == 0) {
                        scrollContent.style.top = null;
                        scrollContent.style.paddingTop = _this.data[name].paddingTop + 'px';
                    }
                    else {
                        scrollContent.style.top = '-' + _this.data[name].navheight + 'px';
                        scrollContent.style.paddingTop = _this.data[name].paddingTop + _this.data[name].navheight + 'px';
                    }
                    if (scrollContent.scrollHeight > (scrollContent.clientHeight + 100)) {
                        _this.data[name].scrolling = true;
                        /** @type {?} */
                        var x = _this.data[name].lastscroll - e.detail.scrollTop;
                        _this.data[name].direction = x > 0 ? 'up' : 'down';
                        _this.data[name].lastscroll = e.detail.scrollTop;
                        _this.data[name].scrollTop = _this.data[name].scrollTop - x;
                        if (_this.data[name].scrollTop > _this.data[name].navheight)
                            _this.data[name].scrollTop = _this.data[name].navheight;
                        if (_this.data[name].scrollTop < 0)
                            _this.data[name].scrollTop = 0;
                        header_1.nativeElement.style.transform = 'translate3d(0, ' + -_this.data[name].scrollTop + 'px, 0)';
                    }
                }));
                content.ionScrollEnd.subscribe((/**
                 * @return {?}
                 */
                function () {
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        //catch the last tick
                        if (scrollContent.scrollTop == 0) {
                            scrollContent.style.top = null;
                            scrollContent.style.paddingTop = _this.data[name].paddingTop + 'px';
                        }
                        _this.data[name].scrolling = false;
                        _this.c(name);
                    }), 10);
                }));
            }), 100);
            contentElem.nativeElement.addEventListener('touchend', (/**
             * @return {?}
             */
            function () {
                _this.data[name].tapping = false;
                _this.c(name);
            }));
            contentElem.nativeElement.addEventListener('touchstart', (/**
             * @return {?}
             */
            function () { return _this.data[name].tapping = true; }));
        }
        else if (parent) {
            /** @type {?} */
            var header_2 = this.data[parent].header;
            /** @type {?} */
            var tabscontentElem_1 = this.data[parent].tabscontentElem;
            /** @type {?} */
            var supertabsToolbar_1 = tabscontentElem_1.nativeElement.querySelector('super-tabs-toolbar');
            setTimeout((/**
             * @return {?}
             */
            function () {
                _this.data[parent].tabscontentHeight = tabscontentElem_1.nativeElement.scrollHeight;
                /** @type {?} */
                var scrollContent = contentElem.nativeElement.shadowRoot.querySelector('.inner-scroll');
                /** @type {?} */
                var tabsscrollContent = _this.data[parent].tabscontentElem.nativeElement.shadowRoot.querySelector('.inner-scroll');
                if (scrollContent.scrollHeight > (scrollContent.clientHeight + 100)) {
                    _this.data[name].navheight = _this.data[parent].header.nativeElement.offsetHeight;
                    _this.data[name].paddingTop = parseInt(window.getComputedStyle(scrollContent)['padding-top'], 10);
                }
                content.ionScroll.subscribe((/**
                 * @param {?} e
                 * @return {?}
                 */
                function (e) {
                    if (_this.data[name].tapping && scrollContent.scrollHeight > (scrollContent.clientHeight + 100)) {
                        if (e.detail.scrollTop == 0) {
                            supertabsToolbar_1.style.position = 'static';
                            scrollContent.style.paddingTop = _this.data[name].paddingTop + 'px';
                            tabscontentElem_1.nativeElement.style.top = null;
                            tabsscrollContent.style.height = _this.data[parent].tabscontentHeight + 'px';
                            tabscontentElem_1.nativeElement.style.top = null;
                        }
                        else {
                            /** @type {?} */
                            var s = e.detail.scrollTop;
                            supertabsToolbar_1.style.position = 'absolute';
                            supertabsToolbar_1.style.top = _this.data[name].navheight + 'px';
                            tabsscrollContent.style.height = (_this.data[parent].tabscontentHeight + _this.data[name].navheight) + 'px';
                            tabscontentElem_1.nativeElement.style.top = '-' + _this.data[name].navheight + 'px';
                            scrollContent.style.paddingTop = _this.data[name].paddingTop + supertabsToolbar_1.clientHeight + _this.data[name].navheight + 'px';
                            scrollContent.scrollTop = s;
                        }
                    }
                    _this.data[name].scrolling = true;
                    /** @type {?} */
                    var x = _this.data[name].lastscroll - e.detail.scrollTop;
                    _this.data[name].direction = x > 0 ? 'up' : 'down';
                    _this.data[name].lastscroll = e.detail.scrollTop;
                    _this.data[name].scrollTop = _this.data[name].scrollTop - x;
                    if (_this.data[name].scrollTop > _this.data[name].navheight)
                        _this.data[name].scrollTop = _this.data[name].navheight;
                    if (_this.data[name].scrollTop < 0)
                        _this.data[name].scrollTop = 0;
                    header_2.nativeElement.style.transform = 'translate3d(0, ' + -_this.data[name].scrollTop + 'px, 0)';
                    supertabsToolbar_1.style.transform = 'translate3d(0, ' + -_this.data[name].scrollTop + 'px, 0)';
                }));
                content.ionScrollEnd.subscribe((/**
                 * @return {?}
                 */
                function () {
                    setTimeout((/**
                     * @return {?}
                     */
                    function () {
                        //catch the last tick
                        if (scrollContent.scrollTop == 0) {
                            supertabsToolbar_1.style.position = 'static';
                            scrollContent.style.paddingTop = _this.data[name].paddingTop + 'px';
                            tabscontentElem_1.nativeElement.style.top = null;
                            tabsscrollContent.style.height = _this.data[parent].tabscontentHeight + 'px';
                            tabscontentElem_1.nativeElement.style.top = null;
                        }
                        _this.data[name].scrolling = false;
                        _this.c(name);
                    }), 10);
                }));
            }), 100);
            contentElem.nativeElement.addEventListener('touchend', (/**
             * @return {?}
             */
            function () {
                _this.data[name].tapping = false;
                _this.c(name);
            }));
            contentElem.nativeElement.addEventListener('touchstart', (/**
             * @return {?}
             */
            function () { return _this.data[name].tapping = true; }));
        }
    };
    /**
     * @private
     * @param {?} name
     * @return {?}
     */
    HidenavService.prototype.c = /**
     * @private
     * @param {?} name
     * @return {?}
     */
    function (name) {
        if (this.data[name].tapping || this.data[name].scrolling)
            return false;
        if (this.data[name].scrollTop == 0 || this.data[name].scrollTop == this.data[name].navheight)
            return false;
        /** @type {?} */
        var content = this.data[name].content;
        /** @type {?} */
        var scrollTopTemp = this.data[name].scrollTop;
        if (this.data[name].direction == 'down') {
            if (this.data[name].scrollTop < this.data[name].navheight) {
                content.scrollByPoint(0, (this.data[name].navheight - scrollTopTemp), (this.data[name].navheight - scrollTopTemp) * 6);
            }
        }
        else if (this.data[name].direction == 'up') {
            if (this.data[name].scrollTop < this.data[name].navheight) {
                content.scrollByPoint(0, -scrollTopTemp, scrollTopTemp * 6);
            }
        }
    };
    /**
     * @param {?} parent
     * @param {?} name
     * @return {?}
     */
    HidenavService.prototype.resetTabs = /**
     * @param {?} parent
     * @param {?} name
     * @return {?}
     */
    function (parent, name) {
        var _this = this;
        /** @type {?} */
        var header = this.data[parent].header;
        /** @type {?} */
        var tabscontentElem = this.data[parent].tabscontentElem;
        /** @type {?} */
        var supertabsToolbar = tabscontentElem.nativeElement.querySelector('super-tabs-toolbar');
        /** @type {?} */
        var tabsscrollContent = this.data[parent].tabscontentElem.nativeElement.shadowRoot.querySelector('.inner-scroll');
        /** @type {?} */
        var scrollContent = this.data[name].contentElem.nativeElement.shadowRoot.querySelector('.inner-scroll');
        scrollContent.scrollTop = scrollContent.scrollTop - this.data[name].scrollTop;
        setTimeout((/**
         * @return {?}
         */
        function () {
            if (scrollContent.scrollTop == 0) {
                supertabsToolbar.style.position = 'static';
                scrollContent.style.paddingTop = _this.data[name].paddingTop + 'px';
                tabscontentElem.nativeElement.style.top = null;
                tabsscrollContent.style.height = _this.data[parent].tabscontentHeight + 'px';
                tabscontentElem.nativeElement.style.top = null;
            }
            else {
                /** @type {?} */
                var s = scrollContent.scrollTop;
                supertabsToolbar.style.position = 'absolute';
                supertabsToolbar.style.top = _this.data[name].navheight + 'px';
                tabsscrollContent.style.height = (_this.data[parent].tabscontentHeight + _this.data[name].navheight) + 'px';
                tabscontentElem.nativeElement.style.top = '-' + _this.data[name].navheight + 'px';
                scrollContent.style.paddingTop = _this.data[name].paddingTop + supertabsToolbar.clientHeight + _this.data[name].navheight + 'px';
                scrollContent.scrollTop = s;
            }
            header.nativeElement.style.transform = null;
            supertabsToolbar.style.transform = null;
        }), 20);
    };
    HidenavService.decorators = [
        { type: Injectable, args: [{
                    providedIn: 'root'
                },] }
    ];
    HidenavService.ctorParameters = function () { return []; };
    /** @nocollapse */ HidenavService.ngInjectableDef = i0.defineInjectable({ factory: function HidenavService_Factory() { return new HidenavService(); }, token: HidenavService, providedIn: "root" });
    return HidenavService;
}());
export { HidenavService };
if (false) {
    /** @type {?} */
    HidenavService.prototype.data;
    /** @type {?} */
    HidenavService.prototype.names;
    /** @type {?} */
    HidenavService.prototype.tabnames;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGlkZW5hdi1zZXJ2aWNlLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9pb25pYzQtaGlkZW5hdi8iLCJzb3VyY2VzIjpbImxpYi9oaWRlbmF2LXNlcnZpY2Uuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxlQUFlLENBQUM7O0FBRXpDO0lBU0k7UUFKQSxTQUFJLEdBQUcsRUFBRSxDQUFDO1FBQ1YsVUFBSyxHQUFHLEVBQUUsQ0FBQztRQUNYLGFBQVEsR0FBRyxFQUFFLENBQUM7SUFHZCxDQUFDOzs7O0lBRUQsb0NBQVc7OztJQUFYOztZQUNRLElBQUksR0FBRyxNQUFNLEdBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNO1FBQ25DLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3RCLE9BQU8sSUFBSSxDQUFDO0lBQ2hCLENBQUM7Ozs7O0lBRUQsdUNBQWM7Ozs7SUFBZCxVQUFlLElBQUk7UUFDZixJQUFHLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUM7WUFDbkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7O1lBQ3pCLE9BQU8sR0FBRyxJQUFJLEdBQUMsS0FBSyxHQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsTUFBTTtRQUNuRCxJQUFJLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNsQyxPQUFPLE9BQU8sQ0FBQztJQUNuQixDQUFDOzs7OztJQUVELGlDQUFROzs7O0lBQVIsVUFBUyxJQUFJOzs7WUFDTCxLQUFLLEdBQUcsRUFBRTtRQUNkLEtBQUssSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksRUFBRTtZQUN2QixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMs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QUcsSUFBSSxDQUFDO2dCQUMvSCxhQUFhLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQzthQUMvQjtZQUNELE1BQU0sQ0FBQyxhQUFhLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7WUFDNUMsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUM7UUFDNUMsQ0FBQyxHQUFFLEVBQUUsQ0FBQyxDQUFDO0lBRVgsQ0FBQzs7Z0JBaE5KLFVBQVUsU0FBQztvQkFDUixVQUFVLEVBQUUsTUFBTTtpQkFDckI7Ozs7eUJBSkQ7Q0FtTkMsQUFqTkQsSUFpTkM7U0E5TVksY0FBYzs7O0lBRXZCLDhCQUFVOztJQUNWLCtCQUFXOztJQUNYLGtDQUFjIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtJbmplY3RhYmxlfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbkBJbmplY3RhYmxlKHtcclxuICAgIHByb3ZpZGVkSW46ICdyb290J1xyXG59KVxyXG5leHBvcnQgY2xhc3MgSGlkZW5hdlNlcnZpY2Uge1xyXG5cclxuICAgIGRhdGEgPSBbXTtcclxuICAgIG5hbWVzID0gW107XHJcbiAgICB0YWJuYW1lcyA9IFtdO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgfVxyXG5cclxuICAgIHJlcXVlc3ROYW1lKCl7XHJcbiAgICAgICAgbGV0IG5hbWUgPSAncGFnZScrdGhpcy5uYW1lcy5sZW5ndGg7XHJcbiAgICAgICAgdGhpcy5uYW1lcy5wdXNoKG5hbWUpO1xyXG4gICAgICAgIHJldHVybiBuYW1lO1xyXG4gICAgfVxyXG5cclxuICAgIHJlcXVlc3RUYWJOYW1lKG5hbWUpe1xyXG4gICAgICAgIGlmKCF0aGlzLnRhYm5hbWVzW25hbWVdKVxyXG4gICAgICAgICAgICB0aGlzLnRhYm5hbWVzW25hbWVdID0gW107XHJcbiAgICAgICAgbGV0IHRhYm5hbWUgPSBuYW1lKyd0YWInK3RoaXMudGFibmFtZXNbbmFtZV0ubGVuZ3RoO1xyXG4gICAgICAgIHRoaXMudGFibmFtZXNbbmFtZV0ucHVzaCh0YWJuYW1lKTtcclxuICAgICAgICByZXR1cm4gdGFibmFtZTtcclxuICAgIH1cclxuXHJcbiAgICBpbml0aWF0ZShuYW1lKSB7XHJcbiAgICAgICAgbGV0IG5hbWVzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQga2V5IGluIHRoaXMuZGF0YSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5kYXRhW2tleV0ucGFyZW50ID09IG5hbWUpXHJcbiAgICAgICAgICAgICAgICBuYW1lcy5wdXNoKGtleSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAobGV0IG5hbWUgb2YgbmFtZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWF0ZTIobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChuYW1lcy5sZW5ndGggPT0gMClcclxuICAgICAgICAgICAgdGhpcy5pbml0aWF0ZTIobmFtZSk7XHJcbiAgICB9XHJcblxyXG4gICAgaW5pdGlhdGUyKG5hbWUpIHtcclxuICAgICAgICBpZiAoISh0aGlzLmRhdGFbbmFtZV0gJiYgKHRoaXMuZGF0YVtuYW1lXS5wYXJlbnQgJiYgdGhpcy5kYXRhW3RoaXMuZGF0YVtuYW1lXS5wYXJlbnRdLnRhYnNjb250ZW50ICYmIHRoaXMuZGF0YVtuYW1lXS5jb250ZW50ICYmIHRoaXMuZGF0YVt0aGlzLmRhdGFbbmFtZV0ucGFyZW50XS5oZWFkZXIpIHx8ICghdGhpcy5kYXRhW25hbWVdLnBhcmVudCAmJiB0aGlzLmRhdGFbbmFtZV0uY29udGVudCAmJiB0aGlzLmRhdGFbbmFtZV0uaGVhZGVyKSkpXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICBsZXQgcGFyZW50ID0gdGhpcy5kYXRhW25hbWVdLnBhcmVudDtcclxuICAgICAgICBsZXQgY29udGVudCA9IHRoaXMuZGF0YVtuYW1lXS5jb250ZW50O1xyXG4gICAgICAgIGxldCBjb250ZW50RWxlbSA9IHRoaXMuZGF0YVtuYW1lXS5jb250ZW50RWxlbTtcclxuICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLnNjcm9sbFRvcCA9PSBudWxsKVxyXG4gICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uc2Nyb2xsVG9wID0gMDtcclxuICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLmxhc3RzY3JvbGwgPT0gbnVsbClcclxuICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLmxhc3RzY3JvbGwgPSAwO1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGFbbmFtZV0uZGlyZWN0aW9uID09IG51bGwpXHJcbiAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5kaXJlY3Rpb24gPSAnJztcclxuICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLnRhcHBpbmcgPT0gbnVsbClcclxuICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLnRhcHBpbmcgPSBmYWxzZTtcclxuICAgICAgICBjb250ZW50LnNjcm9sbEV2ZW50cyA9IHRydWU7XHJcbiAgICAgICAgaWYgKCFwYXJlbnQpIHtcclxuICAgICAgICAgICAgbGV0IGhlYWRlciA9IHRoaXMuZGF0YVtuYW1lXS5oZWFkZXI7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLm5hdmhlaWdodCA9IHRoaXMuZGF0YVtuYW1lXS5oZWFkZXIubmF0aXZlRWxlbWVudC5vZmZzZXRIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2Nyb2xsQ29udGVudDogYW55ID0gY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy5pbm5lci1zY3JvbGwnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoc2Nyb2xsQ29udGVudClbJ3BhZGRpbmctdG9wJ10sIDEwKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuaW9uU2Nyb2xsLnN1YnNjcmliZSgoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGUuZGV0YWlsLnNjcm9sbFRvcCA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2Nyb2xsQ29udGVudC5zdHlsZS50b3AgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxDb250ZW50LnN0eWxlLnBhZGRpbmdUb3AgPSB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbENvbnRlbnQuc3R5bGUudG9wID0gJy0nICsgdGhpcy5kYXRhW25hbWVdLm5hdmhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbENvbnRlbnQuc3R5bGUucGFkZGluZ1RvcCA9IHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wICsgdGhpcy5kYXRhW25hbWVdLm5hdmhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzY3JvbGxDb250ZW50LnNjcm9sbEhlaWdodCA+IChzY3JvbGxDb250ZW50LmNsaWVudEhlaWdodCArIDEwMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLnNjcm9sbGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB4ID0gdGhpcy5kYXRhW25hbWVdLmxhc3RzY3JvbGwgLSBlLmRldGFpbC5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5kaXJlY3Rpb24gPSB4ID4gMCA/ICd1cCcgOiAnZG93bic7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5sYXN0c2Nyb2xsID0gZS5kZXRhaWwuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uc2Nyb2xsVG9wID0gdGhpcy5kYXRhW25hbWVdLnNjcm9sbFRvcCAtIHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbbmFtZV0uc2Nyb2xsVG9wID4gdGhpcy5kYXRhW25hbWVdLm5hdmhlaWdodClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5zY3JvbGxUb3AgPSB0aGlzLmRhdGFbbmFtZV0ubmF2aGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLnNjcm9sbFRvcCA8IDApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uc2Nyb2xsVG9wID0gMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyLm5hdGl2ZUVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsICcgKyAtdGhpcy5kYXRhW25hbWVdLnNjcm9sbFRvcCArICdweCwgMCknO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5pb25TY3JvbGxFbmQuc3Vic2NyaWJlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jYXRjaCB0aGUgbGFzdCB0aWNrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzY3JvbGxDb250ZW50LnNjcm9sbFRvcCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxDb250ZW50LnN0eWxlLnRvcCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxDb250ZW50LnN0eWxlLnBhZGRpbmdUb3AgPSB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLnNjcm9sbGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmMobmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgMTApXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwgMTAwKTtcclxuICAgICAgICAgICAgY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS50YXBwaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmMobmFtZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb250ZW50RWxlbS5uYXRpdmVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCAoKSA9PiB0aGlzLmRhdGFbbmFtZV0udGFwcGluZyA9IHRydWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocGFyZW50KSB7XHJcbiAgICAgICAgICAgIGxldCBoZWFkZXIgPSB0aGlzLmRhdGFbcGFyZW50XS5oZWFkZXI7XHJcbiAgICAgICAgICAgIGxldCB0YWJzY29udGVudEVsZW0gPSB0aGlzLmRhdGFbcGFyZW50XS50YWJzY29udGVudEVsZW07XHJcbiAgICAgICAgICAgIGxldCBzdXBlcnRhYnNUb29sYmFyOiBhbnkgPSB0YWJzY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdzdXBlci10YWJzLXRvb2xiYXInKTtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbcGFyZW50XS50YWJzY29udGVudEhlaWdodCA9IHRhYnNjb250ZW50RWxlbS5uYXRpdmVFbGVtZW50LnNjcm9sbEhlaWdodDtcclxuICAgICAgICAgICAgICAgIGxldCBzY3JvbGxDb250ZW50OiBhbnkgPSBjb250ZW50RWxlbS5uYXRpdmVFbGVtZW50LnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcignLmlubmVyLXNjcm9sbCcpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHRhYnNzY3JvbGxDb250ZW50OiBhbnkgPSB0aGlzLmRhdGFbcGFyZW50XS50YWJzY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy5pbm5lci1zY3JvbGwnKTtcclxuICAgICAgICAgICAgICAgIGlmIChzY3JvbGxDb250ZW50LnNjcm9sbEhlaWdodCA+IChzY3JvbGxDb250ZW50LmNsaWVudEhlaWdodCArIDEwMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0ubmF2aGVpZ2h0ID0gdGhpcy5kYXRhW3BhcmVudF0uaGVhZGVyLm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUoc2Nyb2xsQ29udGVudClbJ3BhZGRpbmctdG9wJ10sIDEwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnRlbnQuaW9uU2Nyb2xsLnN1YnNjcmliZSgoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbbmFtZV0udGFwcGluZyAmJiBzY3JvbGxDb250ZW50LnNjcm9sbEhlaWdodCA+IChzY3JvbGxDb250ZW50LmNsaWVudEhlaWdodCArIDEwMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuZGV0YWlsLnNjcm9sbFRvcCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBlcnRhYnNUb29sYmFyLnN0eWxlLnBvc2l0aW9uID0gJ3N0YXRpYyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxDb250ZW50LnN0eWxlLnBhZGRpbmdUb3AgPSB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic3Njcm9sbENvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5kYXRhW3BhcmVudF0udGFic2NvbnRlbnRIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic2NvbnRlbnRFbGVtLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzID0gZS5kZXRhaWwuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VwZXJ0YWJzVG9vbGJhci5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdXBlcnRhYnNUb29sYmFyLnN0eWxlLnRvcCA9IHRoaXMuZGF0YVtuYW1lXS5uYXZoZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic3Njcm9sbENvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gKHRoaXMuZGF0YVtwYXJlbnRdLnRhYnNjb250ZW50SGVpZ2h0ICsgdGhpcy5kYXRhW25hbWVdLm5hdmhlaWdodCkgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFic2NvbnRlbnRFbGVtLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gJy0nICsgdGhpcy5kYXRhW25hbWVdLm5hdmhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxDb250ZW50LnN0eWxlLnBhZGRpbmdUb3AgPSB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCArIHN1cGVydGFic1Rvb2xiYXIuY2xpZW50SGVpZ2h0ICsgdGhpcy5kYXRhW25hbWVdLm5hdmhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxDb250ZW50LnNjcm9sbFRvcCA9IHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLnNjcm9sbGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHggPSB0aGlzLmRhdGFbbmFtZV0ubGFzdHNjcm9sbCAtIGUuZGV0YWlsLnNjcm9sbFRvcDtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0uZGlyZWN0aW9uID0geCA+IDAgPyAndXAnIDogJ2Rvd24nO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5sYXN0c2Nyb2xsID0gZS5kZXRhaWwuc2Nyb2xsVG9wO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5zY3JvbGxUb3AgPSB0aGlzLmRhdGFbbmFtZV0uc2Nyb2xsVG9wIC0geDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLnNjcm9sbFRvcCA+IHRoaXMuZGF0YVtuYW1lXS5uYXZoZWlnaHQpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5zY3JvbGxUb3AgPSB0aGlzLmRhdGFbbmFtZV0ubmF2aGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbbmFtZV0uc2Nyb2xsVG9wIDwgMClcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kYXRhW25hbWVdLnNjcm9sbFRvcCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyLm5hdGl2ZUVsZW1lbnQuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsICcgKyAtdGhpcy5kYXRhW25hbWVdLnNjcm9sbFRvcCArICdweCwgMCknO1xyXG4gICAgICAgICAgICAgICAgICAgIHN1cGVydGFic1Rvb2xiYXIuc3R5bGUudHJhbnNmb3JtID0gJ3RyYW5zbGF0ZTNkKDAsICcgKyAtdGhpcy5kYXRhW25hbWVdLnNjcm9sbFRvcCArICdweCwgMCknO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50LmlvblNjcm9sbEVuZC5zdWJzY3JpYmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2NhdGNoIHRoZSBsYXN0IHRpY2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNjcm9sbENvbnRlbnQuc2Nyb2xsVG9wID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1cGVydGFic1Rvb2xiYXIuc3R5bGUucG9zaXRpb24gPSAnc3RhdGljJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbENvbnRlbnQuc3R5bGUucGFkZGluZ1RvcCA9IHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wICsgJ3B4JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYnNjb250ZW50RWxlbS5uYXRpdmVFbGVtZW50LnN0eWxlLnRvcCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzc2Nyb2xsQ29udGVudC5zdHlsZS5oZWlnaHQgPSB0aGlzLmRhdGFbcGFyZW50XS50YWJzY29udGVudEhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJzY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGF0YVtuYW1lXS5zY3JvbGxpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jKG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIDEwKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sIDEwMCk7XHJcbiAgICAgICAgICAgIGNvbnRlbnRFbGVtLm5hdGl2ZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRhdGFbbmFtZV0udGFwcGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jKG5hbWUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgKCkgPT4gdGhpcy5kYXRhW25hbWVdLnRhcHBpbmcgPSB0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjKG5hbWUpIHtcclxuICAgICAgICBpZiAodGhpcy5kYXRhW25hbWVdLnRhcHBpbmcgfHwgdGhpcy5kYXRhW25hbWVdLnNjcm9sbGluZylcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmRhdGFbbmFtZV0uc2Nyb2xsVG9wID09IDAgfHwgdGhpcy5kYXRhW25hbWVdLnNjcm9sbFRvcCA9PSB0aGlzLmRhdGFbbmFtZV0ubmF2aGVpZ2h0KVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgbGV0IGNvbnRlbnQgPSB0aGlzLmRhdGFbbmFtZV0uY29udGVudDtcclxuICAgICAgICBsZXQgc2Nyb2xsVG9wVGVtcCA9IHRoaXMuZGF0YVtuYW1lXS5zY3JvbGxUb3A7XHJcbiAgICAgICAgaWYgKHRoaXMuZGF0YVtuYW1lXS5kaXJlY3Rpb24gPT0gJ2Rvd24nKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbbmFtZV0uc2Nyb2xsVG9wIDwgdGhpcy5kYXRhW25hbWVdLm5hdmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5zY3JvbGxCeVBvaW50KDAsICh0aGlzLmRhdGFbbmFtZV0ubmF2aGVpZ2h0IC0gc2Nyb2xsVG9wVGVtcCksICh0aGlzLmRhdGFbbmFtZV0ubmF2aGVpZ2h0IC0gc2Nyb2xsVG9wVGVtcCkgKiA2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhW25hbWVdLmRpcmVjdGlvbiA9PSAndXAnKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRhdGFbbmFtZV0uc2Nyb2xsVG9wIDwgdGhpcy5kYXRhW25hbWVdLm5hdmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgY29udGVudC5zY3JvbGxCeVBvaW50KDAsIC1zY3JvbGxUb3BUZW1wLCBzY3JvbGxUb3BUZW1wICogNik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmVzZXRUYWJzKHBhcmVudCwgbmFtZSkge1xyXG4gICAgICAgIGxldCBoZWFkZXIgPSB0aGlzLmRhdGFbcGFyZW50XS5oZWFkZXI7XHJcbiAgICAgICAgbGV0IHRhYnNjb250ZW50RWxlbSA9IHRoaXMuZGF0YVtwYXJlbnRdLnRhYnNjb250ZW50RWxlbTtcclxuICAgICAgICBsZXQgc3VwZXJ0YWJzVG9vbGJhcjogYW55ID0gdGFic2NvbnRlbnRFbGVtLm5hdGl2ZUVsZW1lbnQucXVlcnlTZWxlY3Rvcignc3VwZXItdGFicy10b29sYmFyJyk7XHJcbiAgICAgICAgbGV0IHRhYnNzY3JvbGxDb250ZW50OiBhbnkgPSB0aGlzLmRhdGFbcGFyZW50XS50YWJzY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoJy5pbm5lci1zY3JvbGwnKTtcclxuICAgICAgICBsZXQgc2Nyb2xsQ29udGVudDogYW55ID0gdGhpcy5kYXRhW25hbWVdLmNvbnRlbnRFbGVtLm5hdGl2ZUVsZW1lbnQuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCcuaW5uZXItc2Nyb2xsJyk7XHJcbiAgICAgICAgc2Nyb2xsQ29udGVudC5zY3JvbGxUb3AgPSBzY3JvbGxDb250ZW50LnNjcm9sbFRvcCAtIHRoaXMuZGF0YVtuYW1lXS5zY3JvbGxUb3A7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzY3JvbGxDb250ZW50LnNjcm9sbFRvcCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBzdXBlcnRhYnNUb29sYmFyLnN0eWxlLnBvc2l0aW9uID0gJ3N0YXRpYyc7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxDb250ZW50LnN0eWxlLnBhZGRpbmdUb3AgPSB0aGlzLmRhdGFbbmFtZV0ucGFkZGluZ1RvcCArICdweCc7XHJcbiAgICAgICAgICAgICAgICB0YWJzY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGFic3Njcm9sbENvbnRlbnQuc3R5bGUuaGVpZ2h0ID0gdGhpcy5kYXRhW3BhcmVudF0udGFic2NvbnRlbnRIZWlnaHQgKyAncHgnO1xyXG4gICAgICAgICAgICAgICAgdGFic2NvbnRlbnRFbGVtLm5hdGl2ZUVsZW1lbnQuc3R5bGUudG9wID0gbnVsbDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGxldCBzID0gc2Nyb2xsQ29udGVudC5zY3JvbGxUb3A7XHJcbiAgICAgICAgICAgICAgICBzdXBlcnRhYnNUb29sYmFyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgICAgICAgICAgICAgIHN1cGVydGFic1Rvb2xiYXIuc3R5bGUudG9wID0gdGhpcy5kYXRhW25hbWVdLm5hdmhlaWdodCArICdweCc7XHJcbiAgICAgICAgICAgICAgICB0YWJzc2Nyb2xsQ29udGVudC5zdHlsZS5oZWlnaHQgPSAodGhpcy5kYXRhW3BhcmVudF0udGFic2NvbnRlbnRIZWlnaHQgKyB0aGlzLmRhdGFbbmFtZV0ubmF2aGVpZ2h0KSArICdweCc7XHJcbiAgICAgICAgICAgICAgICB0YWJzY29udGVudEVsZW0ubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSAnLScgKyB0aGlzLmRhdGFbbmFtZV0ubmF2aGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgIHNjcm9sbENvbnRlbnQuc3R5bGUucGFkZGluZ1RvcCA9IHRoaXMuZGF0YVtuYW1lXS5wYWRkaW5nVG9wICsgc3VwZXJ0YWJzVG9vbGJhci5jbGllbnRIZWlnaHQgKyB0aGlzLmRhdGFbbmFtZV0ubmF2aGVpZ2h0ICsgJ3B4JztcclxuICAgICAgICAgICAgICAgIHNjcm9sbENvbnRlbnQuc2Nyb2xsVG9wID0gcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBoZWFkZXIubmF0aXZlRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBudWxsO1xyXG4gICAgICAgICAgICBzdXBlcnRhYnNUb29sYmFyLnN0eWxlLnRyYW5zZm9ybSA9IG51bGw7XHJcbiAgICAgICAgfSwgMjApO1xyXG5cclxuICAgIH1cclxufVxyXG4iXX0=